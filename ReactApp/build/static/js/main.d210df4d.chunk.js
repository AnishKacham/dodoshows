(this.webpackJsonpshade=this.webpackJsonpshade||[]).push([[0],{121:function(e,t,s){},135:function(e,t,s){},141:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){},156:function(e,t,s){"use strict";s.r(t);var n=s(0),o=s.n(n),a=s(24),c=s.n(a),i=s(8),r=s(9),l=s(11),h=s(10),j=s(26),d=s(111),u=s(7),p=s(72),b=(s.p,s(98),o.a.createContext()),O=s(44),m=(s(99),s(121),s(101)),g=s.n(m),x=s(1),f=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(x.jsxs)(O.a,{className:"movie",tag:"a",onClick:function(){e.props.history.push("/movies/".concat(e.props.movie.movie_id))},border:"none",style:{width:"250px",height:"470px"},children:[Object(x.jsx)(O.a.Img,{variant:"top",src:this.props.movie.poster_url,style:{width:"250px",height:"calc(250px * (40/27))"}}),Object(x.jsx)(O.a.ImgOverlay,{children:Object(x.jsx)(g.a,{className:"home-star-rating",count:5,size:18,color2:"#ffd700",value:.5*this.props.movie.avg_rating,edit:!1})}),Object(x.jsxs)(O.a.Body,{children:[Object(x.jsx)(O.a.Title,{children:this.props.movie.movie_title}),Object(x.jsx)(O.a.Text,{children:v(this.props.movie.release_date)})]})]})}}]),s}(n.Component);function v(e){var t=e.split(" "),s=t[1],n="",o=t[2],a=t[3];return n="1"==s.charAt(1)?"st":"2"==s.charAt(1)?"nd":"3"==s.charAt(1)?"rd":"th","0"==s.charAt(0)&&(s=s.charAt(1)),s+n+" "+o+" "+a}var y=Object(u.g)(f),w=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),n=t.call(this,e),console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent",children:this.props.movies.map((function(e){return Object(x.jsx)("div",{className:"p-2 bd-highlight col-example home-page-movie",children:Object(x.jsx)(y,{movie:e})},e.movie_id)}))})}}]),s}(n.Component),S=Object(u.g)(w),_=s(193),C=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={},e.goToListPage=function(){Object.keys(e.context.user).length?e.props.history.push("/users/".concat(e.context.user.user_id,"/lists")):(localStorage.setItem("lastLoc","/"),e.props.history.push("/login"))},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_.a,{className:"col-md-12 d-none d-md-block bg-light sidebar",activeKey:"/home",onSelect:function(e){return alert("selected ".concat(e))},children:[Object(x.jsx)("div",{className:"sidebar-sticky"}),Object(x.jsx)(_.a.Item,{children:Object(x.jsx)(_.a.Link,{onClick:this.goToListPage,children:"Lists"})}),Object(x.jsx)(_.a.Item,{children:Object(x.jsx)(_.a.Link,{href:"/home",children:"About Us"})}),Object(x.jsx)(_.a.Item,{children:Object(x.jsx)(_.a.Link,{eventKey:"link-1",children:"Report Issue"})}),Object(x.jsx)(_.a.Item,{children:Object(x.jsx)(_.a.Link,{eventKey:"link-2",children:"Donate"})}),Object(x.jsx)(_.a.Item,{children:Object(x.jsx)(_.a.Link,{eventKey:"link-3",disabled:!0,children:"Merchandise"})})]})})}}]),s}(n.Component);C.contextType=b;var k=Object(u.g)(C),T=s(103),L=s(191),I=s(180),D=s(189),E=s(104),N=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.props.clickedOutside(!0)},n.wrapperRef=o.a.createRef(),n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{ref:this.wrapperRef,className:this.props.dropdownClasses,children:this.props.results.slice(0,10).map((function(t){return Object(x.jsx)(I.a.Item,{onClick:function(){e.props.entryDialogue?e.props.onClick(t.id,t.name):e.props.history.push("/movies/".concat(t.id))},children:t.name},t.id)}))})}}]),s}(n.Component),A=Object(u.g)(N),U=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={city:"",movie:{title:"",genres:[],people:[]},results:[],typingTimout:0,dropdownClasses:"dropdown-menu"},e.clickedOutside=function(t){t&&e.setState({dropdownClasses:"dropdown-menu"})},e.changeName=function(t){e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.props.type&&"city"==e.props.type?e.setState({city:t.target.value}):e.setState({movie:{title:"".concat(t.target.value),genres:e.state.movie.genres,people:e.state.movie.people}}),t.target.value&&(e.state.typingTimeout=setTimeout(e.timedSearch,700))},e.timedSearch=function(){"city"==e.props.type?e.searchCities(e.state.city).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.city_id,name:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.movie_id,name:e.movie_title}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})}))},e.searchMovie=function(e){return fetch("http://localhost:5000/api/search/movies",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchCities=function(e){return fetch("http://localhost:5000/api/search/cities",{method:"POST",body:JSON.stringify({city:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.submitHandler=function(t){t.preventDefault(),e.props.entryDialogue||e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){e.props.history.push({pathname:"/",state:{movies:t}})})).then((function(){window.location.reload(!1)}))},e.clickHandler=function(t,s){e.clickedOutside(!0),e.props.sendResult(t,s)},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:this.props.entryDialogue?Object(x.jsxs)(D.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(x.jsx)(E.a,{type:"text",placeholder:this.props.type?this.props.type:"Search for a movie...",className:"mr-sm-2",onChange:this.changeName}),Object(x.jsx)(A,{type:this.props.type,onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]}):Object(x.jsxs)(D.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(x.jsx)(E.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:this.changeName}),Object(x.jsx)(T.a,{variant:"outline-success",type:"submit",children:"Search"}),Object(x.jsx)(A,{onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]})})}}]),s}(n.Component),B=Object(u.g)(U),P=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e,n){var o;return Object(i.a)(this,s),(o=t.call(this,e,n)).state={},o.profileRender=function(){return Object.keys(o.context.user).length?Object(x.jsxs)("div",{children:[Object(x.jsx)(T.a,{children:o.context.user.username}),"  ",Object(x.jsx)(T.a,{onClick:function(){o.context.logoutUser()},children:"Log out"})]}):Object(x.jsx)("div",{children:Object(x.jsx)(T.a,{onClick:function(){console.log(o.props),localStorage.setItem("lastLoc",o.props.location.pathname),o.props.history.push("/login")},children:"Log in"})})},console.log(o.context),o}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(x.jsxs)(L.a,{bg:"light",expand:"lg",children:[Object(x.jsx)(L.a.Brand,{children:"Dodo Shows"}),Object(x.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(_.a,{className:"mr-auto",children:[Object(x.jsx)(_.a.Link,{onClick:function(){e.props.history.push("/")},children:"Home"}),Object(x.jsx)(_.a.Link,{href:"#link",children:"Link"}),Object(x.jsx)(B,{entryDialogue:!1}),Object(x.jsxs)(I.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(x.jsx)(I.a.Item,{href:"#action/3.1",children:"Action"}),Object(x.jsx)(I.a.Item,{href:"#action/3.2",children:"Another action"}),Object(x.jsx)(I.a.Item,{href:"#action/3.3",children:"Something"}),Object(x.jsx)(I.a.Divider,{}),Object(x.jsx)(I.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),this.profileRender()]})]})}}]),s}(n.Component);P.contextType=b;var F=Object(u.g)(P),R=s(181),M=s(182),z=s(105),G=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movies:[]},n.fetchMovies=function(){fetch("http://localhost:5000/api/movies/",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({movies:e}),console.log(n.state.movies)}))},console.log(Object(p.a)(n)),e.location.state?(n.state={movies:e.location.state.movies},console.log(n.state)):n.fetchMovies(),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(R.a,{fluid:!0,children:[Object(x.jsx)(F,{}),Object(x.jsx)("br",{}),Object(x.jsxs)(M.a,{children:[Object(x.jsx)(z.a,{xs:2,id:"sidebar-wrapper",children:Object(x.jsx)(k,{})}),Object(x.jsx)(z.a,{xs:10,id:"page-content-wrapper",children:Object(x.jsx)(R.a,{children:Object(x.jsx)(S,{movies:this.state.movies})})})]})]})})}}]),s}(n.Component);G.contextType=b;var W=Object(u.g)(G),H=s(16),J=s(185),Y=s(109),K=s(186),V=s(35),q=s(187),Q=s(192),X=s(68),Z=s.n(X),$=s(54),ee=s(55),te=(s(135),s(112)),se=s(188),ne=function(e){var t=Object(u.f)(),s=Object(n.useState)(""),o=Object(H.a)(s,2),a=(o[0],o[1],Object(n.useState)("")),c=Object(H.a)(a,2),i=(c[0],c[1],Object(n.useState)([])),r=Object(H.a)(i,2),l=r[0],h=r[1];var j=function(){h([]),e.closeDialogue()};return Object(x.jsxs)(se.a,{show:e.show,children:[Object(x.jsx)(se.a.Header,{closeButton:!0,children:Object(x.jsxs)(se.a.Title,{children:['Add Entry to list "',e.list.list_name,'"']})}),Object(x.jsxs)(se.a.Body,{children:[Object(x.jsx)(B,{entryDialogue:!0,sendResult:function(e,t){console.log(e),console.log(t),function(e,t){var s;for(s=0;s<t.length;s++)if(t[s].movie_id===e)return!0;return!1}(e,l)||h((function(s){return[].concat(Object(te.a)(s),[{movie_id:e,movie_title:t}])}))}}),l.map((function(e){return Object(x.jsx)(T.a,{style:{margin:"10px"},onClick:function(){return t=e,void h(l.filter((function(e){return e!=t})));var t},children:e.movie_title},e.movie_id)}))]}),Object(x.jsxs)(se.a.Footer,{children:[Object(x.jsx)(T.a,{variant:"secondary",onClick:j,children:"Close"}),Object(x.jsx)(T.a,{variant:"primary",onClick:function(s){if(s.preventDefault(),console.log(localStorage.getItem("jwt")),l.length){var n=l.map((function(e){return e.movie_id}));console.log(n),fetch("http://localhost:5000/api/lists/".concat(e.list.list_id),{method:"POST",body:JSON.stringify({movie_ids:n}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){j(),e.reloadPage()}))}},children:"Add movies"})]})]})},oe=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={},n.clicked=function(e){console.log("clicked"),n.props.history.push("/movies/".concat(e))},console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(x.jsx)("tbody",{children:this.props.items.map((function(t,s){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:s+1}),Object(x.jsx)("td",{onClick:function(){return e.clicked(t.movie_id)},children:t.movie_title}),Object(x.jsx)("td",{children:t.score?t.score:"--"}),Object(x.jsx)("td",{children:t.watch_status?"Watched":"Plan to watch"})]},t.movie_id.toString())}))})}}]),s}(n.Component),ae=Object(u.g)(oe),ce=s(184),ie=s(194),re=s(190),le=function(e){var t=Object(u.f)(),s=Object(n.useState)(""),o=Object(H.a)(s,2),a=o[0],c=o[1],i=Object(n.useState)(!1),r=Object(H.a)(i,2),l=r[0],h=r[1],j=Object(n.useContext)(b);return Object(x.jsxs)(se.a,{show:e.show,children:[Object(x.jsx)(se.a.Header,{closeButton:!0,children:Object(x.jsx)(se.a.Title,{children:"Add List"})}),Object(x.jsx)(se.a.Body,{children:Object(x.jsxs)(D.a,{onSubmit:function(s){s.preventDefault(),console.log(a),console.log(l),console.log(localStorage.getItem("jwt")),fetch("http://localhost:5000/api/lists/",{method:"POST",body:JSON.stringify({list_name:a,is_private:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),200!=e.status&&(console.log(j),localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){e.reloadPage()}))},children:[Object(x.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(D.a.Label,{children:"Username"}),Object(x.jsx)(D.a.Control,{type:"text",placeholder:"Enter List Name",onChange:function(e){return c(e.target.value)}})]}),Object(x.jsx)(D.a.Group,{controlId:"formBasicCheckbox",children:Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Make this private",defaultChecked:l,onChange:function(e){return h(e.target.checked)}})}),Object(x.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(x.jsxs)(se.a.Footer,{children:[Object(x.jsx)(T.a,{variant:"secondary",onClick:e.closeDialogue,children:"Close"}),Object(x.jsx)(T.a,{variant:"primary",children:"Save Changes"})]})]})},he=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={show:!1},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)(T.a,{style:{marginTop:"20px"},onClick:this.props.onClick,children:"Add list"})}}]),s}(n.Component),je=Object(u.g)(he),de=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e,n){var o;return Object(i.a)(this,s),(o=t.call(this,e,n)).state={entries:[],ratings:[],showWatched:!0,showUnwatched:!0,searchString:"",sortMode:1,sort:0},o.fetchEntries=function(){return fetch("http://localhost:5000/api/users/".concat(o.props.match.params.id,"/entries"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},o.fetchRatings=function(){return fetch("http://localhost:5000/api/users/".concat(o.props.match.params.id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},o.toggleWatched=function(){console.log("watched"),o.state.showWatched?o.setState({showWatched:!1}):o.setState({showWatched:!0})},o.toggleUnwatched=function(){console.log("unwatched"),o.state.showUnwatched?o.setState({showUnwatched:!1}):o.setState({showUnwatched:!0})},o.toggleSort=function(e){o.state.sortMode==e?-1==o.state.sort?o.setState({sort:1}):o.setState({sort:-1}):o.setState({sortMode:e})},console.log(o.props),o}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.fetchEntries().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({entries:t})})),this.fetchRatings().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({ratings:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(M.a,{children:[Object(x.jsx)(z.a,{children:Object(x.jsx)(ie.a,{control:Object(x.jsx)(re.a,{checked:this.state.showWatched,onChange:this.toggleWatched,name:"watched"}),label:"Watched"})}),Object(x.jsx)(z.a,{children:Object(x.jsx)(ie.a,{control:Object(x.jsx)(re.a,{checked:this.state.showUnwatched,onChange:this.toggleUnwatched,name:"unwatched"}),label:"Plan to watch"})})]}),Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(z.a,{xs:10,children:[Object(x.jsxs)(ce.a,{striped:!0,bordered:!0,hover:!0,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{children:Object(x.jsxs)(D.a.Group,{as:M.a,controlId:"formHorizontalEmail",children:[Object(x.jsx)(D.a.Label,{column:!0,sm:2,children:"Movie"}),Object(x.jsx)(z.a,{sm:10,children:Object(x.jsx)(E.a,{value:this.state.searchString,type:"text",placeholder:"Search...",onChange:function(t){return e.setState({searchString:t.target.value})}})})]})}),Object(x.jsxs)("th",{children:["Score",Object(x.jsx)($.a,{style:{marginLeft:"5px"},icon:ee.b,onClick:function(){return e.toggleSort(1)}})]}),Object(x.jsxs)("th",{children:["Watch Status",Object(x.jsx)($.a,{style:{marginLeft:"5px"},icon:ee.b,onClick:function(){return e.toggleSort(2)}})]})]})}),Object(x.jsx)(ae,{items:this.props.selected_all?this.state.ratings.filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0})):this.state.entries.filter((function(t){return t.list_id==e.props.selected_list.list_id})).filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0}))},this.state.sort)]}),Object(x.jsx)(T.a,{style:{display:this.props.selected_all?"none":"block"},onClick:function(){return e.props.showEntryDialogue(e.props.selected_list)},children:"+ Add movie to this list"}),Object(x.jsx)(T.a,{style:{display:this.props.selected_all?"block":"none"},onClick:function(){return e.props.showRatingDialogue()},children:"+ Add movie"})]}),Object(x.jsx)(z.a,{children:Object(x.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(x.jsx)(T.a,{className:this.props.selected_all?"btn-success":null,style:{marginBottom:"20px"},onClick:function(){return e.props.setSelectedAll(!0)},children:"All"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),this.props.lists.map((function(t){return Object(x.jsxs)(T.a,{className:t.list_id!=e.props.selected_list.list_id||e.props.selected_all?"btn-primary":"btn-success",style:{marginBottom:"3px"},onClick:function(){e.props.setSelectedAll(!1),e.props.changeSelected(t)},children:[t.is_private?Object(x.jsx)($.a,{style:{marginRight:"5px"},icon:ee.a}):Object(x.jsx)(x.Fragment,{}),t.list_name]},t.list_id)})),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(je,{onClick:this.props.showListDialogue})]})})]})]})}}]),s}(n.Component);de.contextType=b;var ue=Object(u.g)(de),pe=function(e){var t=Object(n.useState)({movie_id:e.movie_id,watch_status:0,score:0,review:""}),s=Object(H.a)(t,2),o=s[0],a=s[1],c=Object(n.useContext)(b),i=Object(n.useState)({user_id:0,movie_id:0,watch_status:0,score:0,review:""}),r=Object(H.a)(i,2),l=r[0],h=r[1],d=Object(n.useState)(!1),p=Object(H.a)(d,2),m=p[0],g=p[1],f=Object(n.useState)([]),v=Object(H.a)(f,2),y=v[0],w=v[1],S=Object(n.useState)(!0),_=Object(H.a)(S,2),C=_[0],k=_[1],L=Object(u.f)();Object(n.useEffect)((function(){console.log(c.user),console.log(e),I(),e.showLists&&E()}),[c]);var I=function(){console.log(c.user),console.log(e),Object.keys(c.user).length&&fetch("http://localhost:5000/api/users/".concat(c.user.user_id,"/").concat(e.movie_id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(g(!0),h(e),k(!1),a((function(t){return Object(j.a)(Object(j.a)({},t),{},{watch_status:e.watch_status,score:e.score,review:e.review})})))}))},E=function(){console.log(c.user),console.log(e),Object.keys(c.user).length&&fetch("http://localhost:5000/api/users/".concat(c.user.user_id,"/movies/").concat(e.movie_id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&w(e)}))};if(console.log(Object.keys(l).length),Object.keys(c.user).length&&l){if(C)return Object(x.jsxs)(O.a,{border:o.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(x.jsx)(O.a.Header,{children:Object(x.jsx)(K.a,{variant:o.watch_status?"success":"secondary",title:o.watch_status?"Watched":"Plan to watch",children:Object(x.jsx)(V.a.Item,{eventKey:"1",onClick:function(){return o.watch_status?a((function(e){return Object(j.a)(Object(j.a)({},e),{},{watch_status:0})})):a((function(e){return Object(j.a)(Object(j.a)({},e),{},{watch_status:1})}))},children:o.watch_status?"Plan to watch":"Watched"})})}),Object(x.jsxs)(J.a,{className:"list-group-flush",children:[Object(x.jsx)(Y.a,{children:Object(x.jsxs)(O.a.Text,{children:["Your score:",Object(x.jsx)("br",{}),Object(x.jsx)(Q.a,{name:"customized-empty",className:"user-rating",value:.5*o.score,max:5,precision:.5,size:"small",emptyIcon:Object(x.jsx)(Z.a,{fontSize:"inherit"}),onChange:function(e,t){a((function(e){return Object(j.a)(Object(j.a)({},e),{},{score:2*t})}))}})]})}),Object(x.jsxs)(Y.a,{children:[Object(x.jsx)(O.a.Title,{children:"Your review:"}),Object(x.jsx)(O.a.Text,{children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,defaultValue:o.review,onChange:function(e){a((function(t){return Object(j.a)(Object(j.a)({},t),{},{review:e.target.value})}))}})})]})]}),Object(x.jsxs)(O.a.Footer,{children:[Object(x.jsx)(T.a,{variant:"secondary",size:"sm",onClick:function(){return k(!1)},children:"Cancel"}),Object(x.jsx)(T.a,{variant:"success",className:"float-right",size:"sm",onClick:function(){console.log(o),fetch("http://localhost:5000/api/users/".concat(c.user.user_id),{method:m?"PUT":"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(L.location.pathname)),L.push("/login"))})).then((function(){I(),k(!1)}))},children:m?"Save":"Add"})]})]});if(m&&Object.keys(l).length)return Object(x.jsxs)(M.a,{children:[Object(x.jsx)(z.a,{children:Object(x.jsxs)(O.a,{border:l.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(x.jsx)(O.a.Header,{children:l.watch_status?"Watched":"Plan to watch"}),Object(x.jsxs)(J.a,{className:"list-group-flush",children:[Object(x.jsx)(Y.a,{children:Object(x.jsxs)(O.a.Text,{children:["Your score:",Object(x.jsx)("br",{}),Object(x.jsx)(Q.a,{name:"read-only",value:.5*l.score,max:5,precision:.5,size:"small",readOnly:!0,emptyIcon:Object(x.jsx)(Z.a,{fontSize:"inherit"})})]})}),Object(x.jsxs)(Y.a,{children:[Object(x.jsx)(O.a.Title,{children:"Your review:"}),Object(x.jsx)(O.a.Text,{children:l.review})]})]}),Object(x.jsx)(O.a.Footer,{children:Object(x.jsx)(T.a,{size:"sm",onClick:function(){return k(!0)},children:"Edit"})})]})}),e.showLists?Object(x.jsx)(be,{lists:y}):Object(x.jsx)(x.Fragment,{})]})}return Object(x.jsx)(x.Fragment,{})},be=function(e){var t=Object(n.useContext)(b),s=Object(u.f)();return Object(x.jsx)(z.a,{children:Object(x.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(x.jsx)("div",{style:{marginBottom:"10px"},children:"Present in lists:"}),e.lists.length?e.lists.map((function(e){return Object(x.jsxs)(T.a,{size:"sm",style:{marginBottom:"10px"},onClick:function(){return s.push({pathname:"/users/".concat(t.user.user_id,"/lists"),state:{selected_list:e}})},children:[" ",e.is_private?Object(x.jsx)($.a,{style:{marginRight:"5px"},icon:ee.a}):Object(x.jsx)(x.Fragment,{}),e.list_name]},e.list_id)})):Object(x.jsx)(T.a,{size:"sm",variant:"secondary",style:{marginBottom:"10px"},disabled:!0,children:"Not in any :("})]})})},Oe=function(e){var t=Object(n.useState)([]),s=Object(H.a)(t,2),o=s[0],a=s[1],c=Object(n.useState)(!1),i=Object(H.a)(c,2);i[0],i[1];Object(n.useEffect)((function(){console.log(e),r()}),[]);var r=function(){console.log(e),fetch("http://localhost:5000/api/movies/".concat(e.movie_id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&a(e)}))};return Object(x.jsx)(x.Fragment,{children:o.map((function(e){return Object(x.jsxs)(O.a,{style:{marginBottom:"50px"},children:[Object(x.jsx)(O.a.Header,{children:e.username}),Object(x.jsx)(O.a.Body,{children:Object(x.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(x.jsxs)("p",{children:[' "',e.review,'" ']}),Object(x.jsx)(O.a.Subtitle,{children:Object(x.jsx)(Q.a,{name:"read-only",value:.5*e.score,max:5,precision:.5,size:"small",emptyIcon:Object(x.jsx)(Z.a,{fontSize:"inherit"}),readOnly:!0})})]})})]},e.user_id)}))})},me=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e,n){var o;return Object(i.a)(this,s),(o=t.call(this,e,n)).state={movie_id:o.props.movie_id,movie:[],genres:[],people:[]},o.fetchMovie(o.state.movie_id),console.log(o.props),console.log(n),o}return Object(r.a)(s,[{key:"fetchMovie",value:function(e){var t=this;fetch("http://localhost:5000/api/movies/".concat(e),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({movie:e}),t.setState({people:e.people}),t.setState({genres:e.genres}),console.log(t.state.people),console.log(t.state.genres)}))}},{key:"render",value:function(){var e=this;return console.log("hi2"),Object(x.jsxs)(R.a,{children:[Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(z.a,{children:[Object(x.jsx)(q.a,{src:this.state.movie.poster_url,style:{width:"350px",height:"calc(350px * (40/27))"},thumbnail:!0}),Object(x.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:Object(x.jsx)(Q.a,{name:"read-only",value:.5*this.state.movie.avg_rating,max:5,precision:.1,size:"large",readOnly:!0,emptyIcon:Object(x.jsx)(Z.a,{fontSize:"inherit"})})})]}),Object(x.jsxs)(z.a,{children:[Object(x.jsx)("h1",{className:"display-4",children:this.state.movie.movie_title}),this.state.genres.map((function(e){return Object(x.jsx)("div",{children:ge(e.genre_name)},e.genre_id)})),this.state.movie.movie_description,Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(T.a,{variant:"danger",style:{marginBottom:"30px"},onClick:function(){e.props.history.push({pathname:"/movies/".concat(e.state.movie.movie_id,"/shows"),state:{movie_id:e.state.movie.movie_id}}),console.log(e.state.movie.movie_id)},block:!0,children:"Book"}),Object(x.jsx)(pe,{movie_id:this.props.movie_id,showLists:!0},this.props.movie_id)]})]}),Object(x.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent person",children:this.state.people.map((function(e){return Object(x.jsx)("div",{className:"p-2 bd-highlight col-example",children:Object(x.jsxs)(O.a,{border:"secondary",style:{width:"160px",height:"300px"},children:[Object(x.jsx)(O.a.Header,{children:"NULL"==e.person_role?"Crew":"Cast"}),Object(x.jsx)(O.a.Img,{variant:"top",src:e.profile_url,className:"img-fluid",style:{width:"auto",height:"150px"}}),Object(x.jsxs)(O.a.Body,{children:[Object(x.jsx)(O.a.Title,{children:e.person_name}),Object(x.jsx)(O.a.Text,{children:"NULL"==e.person_role?ge(e.cast_or_crew):"As "+xe(e.person_role)})]})]})},e.person_id)}))}),Object(x.jsx)(Oe,{movie_id:this.state.movie_id})]})}}]),s}(n.Component);function ge(e){return e.charAt(0).toUpperCase()+e.slice(1)}function xe(e){var t,s=e.split('"'),n="";for(t=1;t<s.length-1;t+=1)n+=s[t],t%2==0&&(n+=" ");return n}me.contextType=b;var fe=Object(u.g)(me),ve=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.match.params.id},console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(R.a,{fluid:!0,children:[Object(x.jsx)(F,{}),Object(x.jsx)("br",{}),Object(x.jsxs)(M.a,{children:[Object(x.jsx)(z.a,{xs:2,id:"sidebar-wrapper",children:Object(x.jsx)(k,{})}),Object(x.jsx)(z.a,{xs:10,children:Object(x.jsx)(fe,{movie_id:this.state.movie_id})})]})]})})}}]),s}(n.Component),ye=Object(u.g)(ve),we=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={username:"",password:""},e.handleUsernameChange=function(t){e.setState({username:t.target.value})},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.doLogin=function(t){t.preventDefault(),fetch("http://localhost:5000/api/login",{method:"POST",body:JSON.stringify({username:e.state.username,password:e.state.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):(localStorage.setItem("jwt",t.jwt),e.context.loginUser(),console.log(localStorage.getItem("lastLoc")),e.props.history.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(x.jsxs)(D.a,{onSubmit:this.doLogin,children:[Object(x.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(D.a.Label,{children:"Username"}),Object(x.jsx)(D.a.Control,{type:"text",placeholder:"Enter username",onChange:this.handleUsernameChange})]}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(x.jsx)(D.a.Label,{children:"Password"}),Object(x.jsx)(D.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})]}),Object(x.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})}}]),s}(n.Component);we.contextType=b;var Se=Object(u.g)(we),_e=(s(140),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.location.state.movie_id,shows:[]},n.fetchShows(n.state.movie_id),n}return Object(r.a)(s,[{key:"fetchShows",value:function(e){var t=this;fetch("http://localhost:5000/api/movies/".concat(e,"/shows"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({shows:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"ShowList",children:this.state.shows.map((function(t){return Object(x.jsx)("div",{className:"d-flex flex-column bd-highlight mb-3",children:Object(x.jsxs)(O.a,{bg:"dark",text:"light",children:[Object(x.jsx)(O.a.Header,{as:"h5",children:"Featured"}),Object(x.jsxs)(O.a.Body,{children:[Object(x.jsx)(O.a.Title,{children:t.theatre_mall}),Object(x.jsx)(O.a.Text,{children:t.date_time}),Object(x.jsx)(T.a,{variant:"success",onClick:function(){e.props.history.push({pathname:"/shows/".concat(t.show_id,"/seats"),state:{show_id:t.show_id}}),console.log(t.show_id)},children:"Book Show"})]})]})},t.show_id)}))})}}]),s}(n.Component)),Ce=Object(u.g)(_e),ke=(s(141),[]),Te=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).SeatSelect=function(e){1==document.getElementById(e).classList.toggle("select")?ke.push(e):n.RemoveSeat(ke,e)},n.SeatCheck=function(e,t){return 0==t?Object(x.jsx)("button",{style:{width:"76px",height:"60px",backgroundColor:"red"},id:e,children:e}):Object(x.jsx)("button",{style:{width:"76px",height:"60px"},id:e,onClick:function(){return n.SeatSelect(e)},children:e})},n.SortSeats=function(e){var t,s;for(t=0;t<e.length;t++)for(s=0;s<e.length-1;s++){var n=parseInt(e[s].seat_code.slice(1)),o=parseInt(e[s+1].seat_code.slice(1)),a=e[s].seat_code.charAt(0),c=e[s+1].seat_code.charAt(0);if(0==a.localeCompare(c)&&n>o){var i=e[s];e[s]=e[s+1],e[s+1]=i}}return e},n.state={show_id:n.props.location.state.show_id,seats:[]},n.fetchSeats(n.state.show_id),n}return Object(r.a)(s,[{key:"RemoveSeat",value:function(e,t){var s=e.indexOf(t);return s>-1&&e.splice(s,1),e}},{key:"fetchSeats",value:function(e){var t=this;fetch("http://localhost:5000/api/shows/".concat(e,"/seats"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({seats:t.SortSeats(e)}),console.log("Sorted seats:",t.SortSeats(e))}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{className:"seattitle",children:"Select Your Seats"}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex align-content-stretch flex-wrap",children:this.state.seats.map((function(t){return Object(x.jsx)("div",{children:e.SeatCheck(t.seat_code,t.seat_status)},t.seat_code)}))}),Object(x.jsx)("hr",{size:"30px",color:"blue"}),Object(x.jsx)("p",{className:"screen",children:"Screen here"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(T.a,{variant:"success",style:{width:"50%",height:"100px",marginRight:"25%",marginLeft:"25%",fontSize:"30px",borderRadius:"100px"},onClick:function(){e.props.history.push({pathname:"/shows/".concat(e.state.show_id,"/book"),state:{SeatsBooked:ke,show_id:e.state.show_id}})},children:"Proceed to pay"})]})}}]),s}(n.Component),Le=Object(u.g)(Te),Ie=s(110),De=s.n(Ie);var Ee=function(){var e=Object(n.useState)("default"),t=Object(H.a)(e,2),s=t[0],o=(t[1],Object(n.useState)("plain")),a=Object(H.a)(o,2),c=a[0],i=(a[1],Object(n.useState)("static")),r=Object(H.a)(i,2),l=r[0],h=(r[1],Object(n.useState)(300)),j=Object(H.a)(h,2),d=j[0],u=(j[1],Object(n.useState)(90)),p=Object(H.a)(u,2),b=p[0];return p[1],Object(x.jsx)(De.a,{environment:"TEST",Home:!0,buttonColor:s,buttonType:c,buttonSizeMode:l,paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"example"}}}],merchantInfo:{merchantId:"12345678901234567890",merchantName:"Demo Merchant"},transactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:"100.00",currencyCode:"USD",countryCode:"US"}},onLoadPaymentData:function(e){console.log("load payment data",e)},style:{width:d,height:b}})},Ne=(s(154),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={BSeats:n.props.location.state.SeatsBooked,show_id:n.props.location.state.show_id},console.log(n.state.BSeats),n}return Object(r.a)(s,[{key:"Book",value:function(e,t){var s=this;fetch("http://localhost:5000/api/shows/".concat(t,"/book"),{method:"POST",body:JSON.stringify({seats:e,paymentDeets:"hi"}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){s.setState({seats:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"GPay",children:[Object(x.jsx)("p",{className:"Thanks",children:"Thank you! Please complete your booking by paying below. Make sure to receive your ticket! Enjoy"}),Object(x.jsx)(Ee,{}),Object(x.jsx)(T.a,{variant:"success",size:"lg",onClick:function(){return e.Book(e.state.BSeats,e.state.show_id)},children:"Send ticket"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})}}]),s}(n.Component)),Ae=Object(u.g)(Ne),Ue=function(e){var t=Object(n.useState)({}),s=Object(H.a)(t,2),o=s[0],a=s[1],c=Object(n.useState)(!1),i=Object(H.a)(c,2),r=i[0],l=i[1],h=function(e,t){console.log(e),console.log(t),a({movie_id:e,movie_title:t}),l(!0)},j=function(){return r?Object(x.jsx)("div",{children:Object(x.jsx)(T.a,{onClick:function(){return l(!1)},style:{marginBottom:"10px"},children:o.movie_title})}):Object(x.jsx)(B,{entryDialogue:!0,sendResult:h})};return Object(x.jsxs)(se.a,{show:e.show,children:[Object(x.jsx)(se.a.Header,{closeButton:!0,children:Object(x.jsx)(se.a.Title,{children:"Add a movie"})}),Object(x.jsxs)(se.a.Body,{children:[Object(x.jsx)(j,{}),r?Object(x.jsx)(pe,{movie_id:o.movie_id,showList:!1},o.movie_id):Object(x.jsx)(x.Fragment,{})]}),Object(x.jsx)(se.a.Footer,{children:Object(x.jsx)(T.a,{variant:"secondary",onClick:function(){a({}),e.closeDialogue()},children:"Close"})})]})},Be=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={showList:!1,showEntry:!1,showRating:!1,lists:[{list_id:0,list_name:"",is_private:0}],selected_list:{},refreshEntries:!0,selected_all:!0},n.showListDialogue=function(){n.setState({showList:!0})},n.closeListDialogue=function(){n.setState({showList:!1})},n.showEntryDialogue=function(e){console.log(e),n.setState({selected_list:e,showEntry:!0})},n.closeEntryDialogue=function(){n.setState({showEntry:!1})},n.showRatingDialogue=function(){n.setState({showRating:!0})},n.closeRatingDialogue=function(){n.setState({showRating:!1})},n.reloadEntries=function(){n.state.refreshEntries?n.setState({refreshEntries:!1,selected_all:!1}):n.setState({refreshEntries:!0,selected_all:!1})},n.reloadLists=function(){n.fetchLists()},n.componentDidMount=function(){n.fetchLists()},n.fetchLists=function(){fetch("http://localhost:5000/api/users/".concat(n.props.match.params.id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return console.log(e),200!=e.status&&(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")),e.json()})).then((function(e){console.log(e),void 0!=e.msg?(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")):0===Object.keys(n.state.selected_list).length&&e.length?(console.log(Object.keys(n.state.selected_list).length),console.log("1"),console.log(e),n.setState({lists:e,selected_list:e[0]})):(console.log(Object.keys(n.state.selected_list).length),n.setState({lists:e}))})).then((function(){n.props.location.state&&n.setState({selected_list:n.props.location.state.selected_list,selected_all:!1})}))},console.log(e.location),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(R.a,{fluid:!0,children:[Object(x.jsx)(F,{}),Object(x.jsx)("br",{}),Object(x.jsxs)(M.a,{children:[Object(x.jsx)(z.a,{xs:2,id:"sidebar-wrapper",children:Object(x.jsx)(k,{})}),Object(x.jsx)(z.a,{xs:10,id:"page-content-wrapper",children:Object(x.jsx)(R.a,{children:Object(x.jsx)(ue,{lists:this.state.lists,selected_list:this.state.selected_list,changeSelected:function(t){e.setState({selected_list:t})},setSelectedAll:function(t){return e.setState({selected_all:t})},selected_all:this.state.selected_all,showListDialogue:this.showListDialogue,showEntryDialogue:this.showEntryDialogue,showRatingDialogue:this.showRatingDialogue},this.state.lists.toString()+" "+this.state.refreshEntries.toString()+" "+this.state.selected_list.toString()+" "+this.state.selected_all.toString())})})]}),Object(x.jsx)(le,{selected_list:this.state.selected_list,show:this.state.showList,closeDialogue:this.closeListDialogue,reloadPage:this.reloadLists}),Object(x.jsx)(ne,{list:this.state.selected_list,show:this.state.showEntry,closeDialogue:this.closeEntryDialogue,reloadPage:this.reloadEntries}),Object(x.jsx)(Ue,{show:this.state.showRating,closeDialogue:this.closeRatingDialogue,reloadPage:this.reloadEntries})]})})}}]),s}(n.Component),Pe=Object(u.g)(Be),Fe=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={username:"",password:"",email:"",city_id:0,city_name:"",has_selected_city:!1},e.handleEmailChange=function(t){e.setState({email:t.target.value})},e.handleUsernameChange=function(t){e.setState({username:t.target.value})},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.doSignup=function(){fetch("http://localhost:5000/api/signup",{method:"POST",body:JSON.stringify({username:e.state.username,password:e.state.password,email:e.state.email,city_id:e.state.city_id}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):(localStorage.setItem("jwt",t.jwt),e.context.loginUser(),console.log(localStorage.getItem("lastLoc")),e.props.history.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},e.getCity=function(t,s){console.log(t,s),e.setState({city_id:t,city_name:s,has_selected_city:!0})},e.cityDisplay=function(){return e.state.has_selected_city?Object(x.jsx)("div",{children:Object(x.jsx)(T.a,{onClick:function(){return e.setState({has_selected_city:!1})},children:e.state.city_name})}):Object(x.jsx)(B,{entryDialogue:!0,sendResult:e.getCity,type:"city"})},e}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(D.a.Label,{children:"Email"}),Object(x.jsx)(D.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})]}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicUsername",children:[Object(x.jsx)(D.a.Label,{children:"Username"}),Object(x.jsx)(D.a.Control,{type:"text",placeholder:"Enter username",onChange:this.handleUsernameChange})]}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(x.jsx)(D.a.Label,{children:"Password"}),Object(x.jsx)(D.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})]}),this.cityDisplay(),Object(x.jsx)(T.a,{variant:"primary",type:"submit",style:{marginTop:"20px"},onClick:function(){return e.doSignup()},children:"Submit"})]})}}]),s}(n.Component);Fe.contextType=b;var Re=Object(u.g)(Fe),Me=function(){return Object(x.jsx)(d.a,{children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(x.jsx)(W,{})}}),Object(x.jsx)(u.a,{exact:!0,path:"/movies/:id",render:function(e){return Object(x.jsx)(ye,Object(j.a)({},e),e.match.params.id)}}),Object(x.jsx)(u.a,{exact:!0,path:"/users/:id/lists",render:function(e){return Object(x.jsx)(Pe,Object(j.a)({},e),e.match.params.id)}}),Object(x.jsx)(u.a,{exact:!0,path:"/shows/:id/seats",render:function(){return Object(x.jsx)(Le,{})}}),Object(x.jsx)(u.a,{exact:!0,path:"/shows/:id/book",render:function(){return Object(x.jsx)(Ae,{})}}),Object(x.jsx)(u.a,{exact:!0,path:"/movies/:id/shows",render:function(){return Object(x.jsx)(Ce,{})}}),Object(x.jsx)(u.a,{exact:!0,path:"/login",render:function(){return Object(x.jsx)(Se,{})}}),Object(x.jsx)(u.a,{exact:!0,path:"/signup",render:function(){return Object(x.jsx)(Re,{})}})]})})})};var ze=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).logout=function(){localStorage.clear(),n.setState({user:{}})},n.login=function(){fetch("http://localhost:5000/api/is-logged-in",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){e.logged_in?(n.setState({user:{user_id:e.details.user_id,username:e.details.username,city_id:e.details.city_id,city:e.details.city_name}}),console.log(n.state.user)):n.setState({user:{}}),console.log(e)}))},n.state={user:{}},n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.login()}},{key:"render",value:function(){var e={user:this.state.user,logoutUser:this.logout,loginUser:this.login};return Object(x.jsx)(b.Provider,{value:e,children:Object(x.jsx)(Me,{})})}}]),s}(n.Component),Ge=(s(155),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,196)).then((function(t){var s=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),o(e),a(e),c(e)}))});c.a.render(Object(x.jsx)(ze,{}),document.getElementById("root")),Ge()},98:function(e,t,s){}},[[156,1,2]]]);
//# sourceMappingURL=main.d210df4d.chunk.js.map