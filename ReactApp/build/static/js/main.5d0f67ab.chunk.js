(this.webpackJsonpshade=this.webpackJsonpshade||[]).push([[0],{126:function(e,t,s){},160:function(e,t,s){},175:function(e,t,s){},178:function(e,t,s){},191:function(e,t,s){},192:function(e,t,s){},193:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),o=s(18),a=s.n(o),i=s(14),r=s(15),l=s(17),h=s(16),j=s(27),d=s(49),u=s(9),b=s(92),p=(s.p,s(126),c.a.createContext()),O=s(59),m=(s(127),s(160),s(132)),x=s.n(m),g=s(1),f=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsxs)(O.a,{className:"movie",tag:"a",onClick:function(){e.props.history.push("/movies/".concat(e.props.movie.movie_id))},border:"none",style:{width:"250px",height:"470px"},children:[Object(g.jsx)(O.a.Img,{variant:"top",src:this.props.movie.poster_url,style:{width:"250px",height:"calc(250px * (40/27))"}}),Object(g.jsx)(O.a.ImgOverlay,{children:Object(g.jsx)(x.a,{className:"home-star-rating",count:5,size:18,color2:"#ffd700",value:.5*this.props.movie.avg_rating,edit:!1})}),Object(g.jsxs)(O.a.Body,{children:[Object(g.jsx)(O.a.Title,{children:this.props.movie.movie_title}),Object(g.jsx)(O.a.Text,{children:v(this.props.movie.release_date)})]})]})}}]),s}(n.Component);function v(e){var t=e.split(" "),s=t[1],n="",c=t[2],o=t[3];return n="1"==s.charAt(1)?"st":"2"==s.charAt(1)?"nd":"3"==s.charAt(1)?"rd":"th","0"==s.charAt(0)&&(s=s.charAt(1)),s+n+" "+c+" "+o}var y=Object(u.h)(f),w=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),n=t.call(this,e),console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent",children:this.props.movies.map((function(e){return Object(g.jsx)("div",{className:"p-2 bd-highlight col-example home-page-movie",children:Object(g.jsx)(y,{movie:e})},e.movie_id)}))})}}]),s}(n.Component),S=Object(u.h)(w),_=s(252),k=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={},e.goToListPage=function(){Object.keys(e.context.user).length?e.props.history.push("/users/".concat(e.context.user.user_id,"/lists")):(localStorage.setItem("lastLoc","/"),e.props.history.push("/login"))},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(_.a,{className:"col-md-12 d-none d-md-block bg-light sidebar",activeKey:"/home",onSelect:function(e){return alert("selected ".concat(e))},children:[Object(g.jsx)("div",{className:"sidebar-sticky"}),Object(g.jsx)(_.a.Item,{children:Object(g.jsx)(_.a.Link,{onClick:this.goToListPage,children:"Lists"})}),Object(g.jsx)(_.a.Item,{children:Object(g.jsx)(_.a.Link,{href:"/home",children:"About Us"})}),Object(g.jsx)(_.a.Item,{children:Object(g.jsx)(_.a.Link,{eventKey:"link-1",children:"Report Issue"})}),Object(g.jsx)(_.a.Item,{children:Object(g.jsx)(_.a.Link,{eventKey:"link-2",children:"Donate"})}),Object(g.jsx)(_.a.Item,{children:Object(g.jsx)(_.a.Link,{eventKey:"link-3",disabled:!0,children:"Merchandise"})})]})})}}]),s}(n.Component);k.contextType=p;var C=Object(u.h)(k),T=s(11),L=s(249),I=s(228),D=s(232),B=s(255),N=s(142),A=s(254),E=s(256),U=s(247),F=s(135),R=s(134),W=s(245),z=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.props.clickedOutside(!0)},n.wrapperRef=c.a.createRef(),n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{ref:this.wrapperRef,className:this.props.dropdownClasses,children:this.props.results.slice(0,10).map((function(t){return Object(g.jsx)(I.a.Item,{onClick:function(){e.props.entryDialogue?e.props.onClick(t.id,t.name):e.props.history.push("/movies/".concat(t.id))},children:t.name},t.id)}))})}}]),s}(n.Component),P=Object(u.h)(z),M=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={city:"",movie:{title:"",genres:[],people:[]},results:[],typingTimout:0,dropdownClasses:"dropdown-menu"},e.clickedOutside=function(t){t&&e.setState({dropdownClasses:"dropdown-menu"})},e.changeName=function(t){e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.props.type&&"city"==e.props.type?e.setState({city:t.target.value}):e.setState({movie:{title:"".concat(t.target.value),genres:e.state.movie.genres,people:e.state.movie.people}}),t.target.value&&(e.state.typingTimeout=setTimeout(e.timedSearch,500))},e.timedSearch=function(){"city"==e.props.type?e.searchCities(e.state.city).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.city_id,name:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.movie_id,name:e.movie_title}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})}))},e.searchMovie=function(e){return fetch("http://localhost:5000/api/search/movies",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchCities=function(e){return fetch("http://localhost:5000/api/search/cities",{method:"POST",body:JSON.stringify({city:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.submitHandler=function(t){t.preventDefault(),e.props.entryDialogue||e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){e.props.history.push({pathname:"/",state:{movies:t}})})).then((function(){window.location.reload(!1)}))},e.clickHandler=function(t,s){e.clickedOutside(!0),e.props.sendResult(t,s)},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:this.props.entryDialogue?Object(g.jsxs)(U.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",autocomplete:"off",children:[Object(g.jsx)(W.a,{fullWidth:!0,label:this.props.type?this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1):"Search for a movie...",name:"username",size:"small",variant:"outlined",onChange:this.changeName}),Object(g.jsx)(P,{type:this.props.type,onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]}):Object(g.jsxs)(U.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(g.jsx)(F.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:this.changeName}),Object(g.jsx)(R.a,{variant:"outline-success",type:"submit",children:"Search"}),Object(g.jsx)(P,{onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]})})}}]),s}(n.Component),H=Object(u.h)(M),G=function(){var e=Object(n.useContext)(p),t=Object(u.f)(),s=Object(u.g)(),o=c.a.useState(!1),a=Object(T.a)(o,2),i=a[0],r=a[1],l=c.a.useRef(null);return console.log(e),Object.keys(e.user).length?Object(g.jsxs)("div",{style:{border:"grey",borderWidth:"1px",borderRadius:"30px",borderStyle:"solid",padding:"5px",textAlign:"center"},onClick:function(){r((function(e){return!e}))},children:[e.user.profile_url?Object(g.jsx)(B.a,{src:e.user.profile_url,ref:l}):Object(g.jsx)(B.a,{ref:l,children:e.user.username.charAt(0).toUpperCase()}),Object(g.jsx)(N.a,{open:i,anchorEl:l.current,role:void 0,disablePortal:!0,transition:!0,children:Object(g.jsx)(A.a,{id:"menu-list-grow",children:Object(g.jsx)(E.a,{onClick:function(){return e.logoutUser()},children:"Logout"})})})]}):Object(g.jsx)("div",{children:Object(g.jsx)(D.a,{onClick:function(){localStorage.setItem("lastLoc",s.pathname),t.push("/login")},children:"Log in"})})},J=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsxs)(L.a,{bg:"light",expand:"lg",children:[Object(g.jsx)(L.a.Brand,{children:"Dodo Shows"}),Object(g.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(g.jsxs)(_.a,{className:"mr-auto",children:[Object(g.jsx)(_.a.Link,{onClick:function(){e.props.history.push("/")},children:"Home"}),Object(g.jsx)(_.a.Link,{href:"#link",children:"Link"}),Object(g.jsx)(H,{entryDialogue:!1}),Object(g.jsxs)(I.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(g.jsx)(I.a.Item,{href:"#action/3.1",children:"Action"}),Object(g.jsx)(I.a.Item,{href:"#action/3.2",children:"Another action"}),Object(g.jsx)(I.a.Item,{href:"#action/3.3",children:"Something"}),Object(g.jsx)(I.a.Divider,{}),Object(g.jsx)(I.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(g.jsx)(G,{})]})]})}}]),s}(n.Component),Y=Object(u.h)(J),K=s(233),q=s(234),Z=s(136),V=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movies:[]},n.fetchMovies=function(){fetch("http://localhost:5000/api/movies/",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({movies:e}),console.log(n.state.movies)}))},console.log(Object(b.a)(n)),e.location.state?(n.state={movies:e.location.state.movies},console.log(n.state)):n.fetchMovies(),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(K.a,{fluid:!0,children:[Object(g.jsx)(Y,{}),Object(g.jsx)("br",{}),Object(g.jsxs)(q.a,{children:[Object(g.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(g.jsx)(C,{})}),Object(g.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(g.jsx)(K.a,{children:Object(g.jsx)(S,{movies:this.state.movies})})})]})]})})}}]),s}(n.Component);V.contextType=p;var $=Object(u.h)(V),Q=s(238),X=s(140),ee=s(239),te=s(45),se=s(240),ne=s(258),ce=s(88),oe=s.n(ce),ae=s(74),ie=s(75),re=(s(175),s(143)),le=s(244),he=function(e){var t=Object(u.f)(),s=Object(n.useState)(""),c=Object(T.a)(s,2),o=(c[0],c[1],Object(n.useState)("")),a=Object(T.a)(o,2),i=(a[0],a[1],Object(n.useState)([])),r=Object(T.a)(i,2),l=r[0],h=r[1];var j=function(){h([]),e.closeDialogue()};return Object(g.jsxs)(le.a,{show:e.show,children:[Object(g.jsx)(le.a.Header,{closeButton:!0,children:Object(g.jsxs)(le.a.Title,{children:['Add Entry to list "',e.list.list_name,'"']})}),Object(g.jsxs)(le.a.Body,{children:[Object(g.jsx)(H,{entryDialogue:!0,sendResult:function(e,t){console.log(e),console.log(t),function(e,t){var s;for(s=0;s<t.length;s++)if(t[s].movie_id===e)return!0;return!1}(e,l)||h((function(s){return[].concat(Object(re.a)(s),[{movie_id:e,movie_title:t}])}))}}),l.map((function(e){return Object(g.jsx)(R.a,{style:{margin:"10px"},onClick:function(){return t=e,void h(l.filter((function(e){return e!=t})));var t},children:e.movie_title},e.movie_id)}))]}),Object(g.jsxs)(le.a.Footer,{children:[Object(g.jsx)(R.a,{variant:"secondary",onClick:j,children:"Close"}),Object(g.jsx)(R.a,{variant:"primary",onClick:function(s){if(s.preventDefault(),console.log(localStorage.getItem("jwt")),l.length){var n=l.map((function(e){return e.movie_id}));console.log(n),fetch("http://localhost:5000/api/lists/".concat(e.list.list_id),{method:"POST",body:JSON.stringify({movie_ids:n}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){j(),e.reloadPage()}))}},children:"Add movies"})]})]})},je=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={},n.clicked=function(e){console.log("clicked"),n.props.history.push("/movies/".concat(e))},console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsx)("tbody",{children:this.props.items.map((function(t,s){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:s+1}),Object(g.jsx)("td",{onClick:function(){return e.clicked(t.movie_id)},children:t.movie_title}),Object(g.jsx)("td",{children:t.score?t.score:"--"}),Object(g.jsx)("td",{children:t.watch_status?"Watched":"Plan to watch"})]},t.movie_id.toString())}))})}}]),s}(n.Component),de=Object(u.h)(je),ue=s(237),be=s(235),pe=s(250),Oe=function(e){var t=Object(u.f)(),s=Object(n.useState)(""),c=Object(T.a)(s,2),o=c[0],a=c[1],i=Object(n.useState)(!1),r=Object(T.a)(i,2),l=r[0],h=r[1],j=Object(n.useContext)(p);return Object(g.jsxs)(le.a,{show:e.show,children:[Object(g.jsx)(le.a.Header,{closeButton:!0,children:Object(g.jsx)(le.a.Title,{children:"Add List"})}),Object(g.jsx)(le.a.Body,{children:Object(g.jsxs)(U.a,{onSubmit:function(s){s.preventDefault(),console.log(o),console.log(l),console.log(localStorage.getItem("jwt")),fetch("http://localhost:5000/api/lists/",{method:"POST",body:JSON.stringify({list_name:o,is_private:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),200!=e.status&&(console.log(j),localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){e.reloadPage()}))},children:[Object(g.jsxs)(U.a.Group,{controlId:"formBasicEmail",children:[Object(g.jsx)(U.a.Label,{children:"Username"}),Object(g.jsx)(U.a.Control,{type:"text",placeholder:"Enter List Name",onChange:function(e){return a(e.target.value)}})]}),Object(g.jsx)(U.a.Group,{controlId:"formBasicCheckbox",children:Object(g.jsx)(U.a.Check,{type:"checkbox",label:"Make this private",defaultChecked:l,onChange:function(e){return h(e.target.checked)}})}),Object(g.jsx)(R.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(g.jsxs)(le.a.Footer,{children:[Object(g.jsx)(R.a,{variant:"secondary",onClick:e.closeDialogue,children:"Close"}),Object(g.jsx)(R.a,{variant:"primary",children:"Save Changes"})]})]})},me=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={show:!1},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)(R.a,{style:{marginTop:"20px"},onClick:this.props.onClick,children:"Add list"})}}]),s}(n.Component),xe=Object(u.h)(me),ge=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e,n){var c;return Object(i.a)(this,s),(c=t.call(this,e,n)).state={entries:[],ratings:[],showWatched:!0,showUnwatched:!0,searchString:"",sortMode:1,sort:0},c.fetchEntries=function(){return fetch("http://localhost:5000/api/users/".concat(c.props.match.params.id,"/entries"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.fetchRatings=function(){return fetch("http://localhost:5000/api/users/".concat(c.props.match.params.id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.toggleWatched=function(){console.log("watched"),c.state.showWatched?c.setState({showWatched:!1}):c.setState({showWatched:!0})},c.toggleUnwatched=function(){console.log("unwatched"),c.state.showUnwatched?c.setState({showUnwatched:!1}):c.setState({showUnwatched:!0})},c.toggleSort=function(e){c.state.sortMode==e?-1==c.state.sort?c.setState({sort:1}):c.setState({sort:-1}):c.setState({sortMode:e})},console.log(c.props),c}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.fetchEntries().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({entries:t})})),this.fetchRatings().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({ratings:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(q.a,{children:[Object(g.jsx)(Z.a,{children:Object(g.jsx)(be.a,{control:Object(g.jsx)(pe.a,{checked:this.state.showWatched,onChange:this.toggleWatched,name:"watched"}),label:"Watched"})}),Object(g.jsx)(Z.a,{children:Object(g.jsx)(be.a,{control:Object(g.jsx)(pe.a,{checked:this.state.showUnwatched,onChange:this.toggleUnwatched,name:"unwatched"}),label:"Plan to watch"})})]}),Object(g.jsxs)(q.a,{children:[Object(g.jsxs)(Z.a,{xs:10,children:[Object(g.jsxs)(ue.a,{striped:!0,bordered:!0,hover:!0,children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"#"}),Object(g.jsx)("th",{children:Object(g.jsxs)(U.a.Group,{as:q.a,controlId:"formHorizontalEmail",children:[Object(g.jsx)(U.a.Label,{column:!0,sm:2,children:"Movie"}),Object(g.jsx)(Z.a,{sm:10,children:Object(g.jsx)(F.a,{value:this.state.searchString,type:"text",placeholder:"Search...",onChange:function(t){return e.setState({searchString:t.target.value})}})})]})}),Object(g.jsxs)("th",{children:["Score",Object(g.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(1)}})]}),Object(g.jsxs)("th",{children:["Watch Status",Object(g.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(2)}})]})]})}),Object(g.jsx)(de,{items:this.props.selected_all?this.state.ratings.filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0})):this.state.entries.filter((function(t){return t.list_id==e.props.selected_list.list_id})).filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0}))},this.state.sort)]}),Object(g.jsx)(R.a,{style:{display:this.props.selected_all?"none":"block"},onClick:function(){return e.props.showEntryDialogue(e.props.selected_list)},children:"+ Add movie to this list"}),Object(g.jsx)(R.a,{style:{display:this.props.selected_all?"block":"none"},onClick:function(){return e.props.showRatingDialogue()},children:"+ Add movie"})]}),Object(g.jsx)(Z.a,{children:Object(g.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(g.jsx)(R.a,{className:this.props.selected_all?"btn-success":null,style:{marginBottom:"20px"},onClick:function(){return e.props.setSelectedAll(!0)},children:"All"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),this.props.lists.map((function(t){return Object(g.jsxs)(R.a,{className:t.list_id!=e.props.selected_list.list_id||e.props.selected_all?"btn-primary":"btn-success",style:{marginBottom:"3px"},onClick:function(){e.props.setSelectedAll(!1),e.props.changeSelected(t)},children:[t.is_private?Object(g.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(g.jsx)(g.Fragment,{}),t.list_name]},t.list_id)})),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(xe,{onClick:this.props.showListDialogue})]})})]})]})}}]),s}(n.Component);ge.contextType=p;var fe=Object(u.h)(ge),ve=function(e){var t=Object(n.useState)({movie_id:e.movie_id,watch_status:0,score:0,review:""}),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useContext)(p),i=Object(n.useState)({user_id:0,movie_id:0,watch_status:0,score:0,review:""}),r=Object(T.a)(i,2),l=r[0],h=r[1],d=Object(n.useState)(!1),b=Object(T.a)(d,2),m=b[0],x=b[1],f=Object(n.useState)([]),v=Object(T.a)(f,2),y=v[0],w=v[1],S=Object(n.useState)(!0),_=Object(T.a)(S,2),k=_[0],C=_[1],L=Object(u.f)();Object(n.useEffect)((function(){console.log(a.user),console.log(e),I(),e.showLists&&D()}),[a]);var I=function(){console.log(a.user),console.log(e),Object.keys(a.user).length&&fetch("http://localhost:5000/api/users/".concat(a.user.user_id,"/").concat(e.movie_id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(x(!0),h(e),C(!1),o((function(t){return Object(j.a)(Object(j.a)({},t),{},{watch_status:e.watch_status,score:e.score,review:e.review})})))}))},D=function(){console.log(a.user),console.log(e),Object.keys(a.user).length&&fetch("http://localhost:5000/api/users/".concat(a.user.user_id,"/movies/").concat(e.movie_id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&w(e)}))};if(console.log(Object.keys(l).length),Object.keys(a.user).length&&l){if(k)return Object(g.jsxs)(O.a,{border:c.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(g.jsx)(O.a.Header,{children:Object(g.jsx)(ee.a,{variant:c.watch_status?"success":"secondary",title:c.watch_status?"Watched":"Plan to watch",children:Object(g.jsx)(te.a.Item,{eventKey:"1",onClick:function(){return c.watch_status?o((function(e){return Object(j.a)(Object(j.a)({},e),{},{watch_status:0})})):o((function(e){return Object(j.a)(Object(j.a)({},e),{},{watch_status:1})}))},children:c.watch_status?"Plan to watch":"Watched"})})}),Object(g.jsxs)(Q.a,{className:"list-group-flush",children:[Object(g.jsx)(X.a,{children:Object(g.jsxs)(O.a.Text,{children:["Your score:",Object(g.jsx)("br",{}),Object(g.jsx)(ne.a,{name:"customized-empty",className:"user-rating",value:.5*c.score,max:5,precision:.5,size:"small",emptyIcon:Object(g.jsx)(oe.a,{fontSize:"inherit"}),onChange:function(e,t){o((function(e){return Object(j.a)(Object(j.a)({},e),{},{score:2*t})}))}})]})}),Object(g.jsxs)(X.a,{children:[Object(g.jsx)(O.a.Title,{children:"Your review:"}),Object(g.jsx)(O.a.Text,{children:Object(g.jsx)(U.a.Control,{as:"textarea",rows:3,defaultValue:c.review,onChange:function(e){o((function(t){return Object(j.a)(Object(j.a)({},t),{},{review:e.target.value})}))}})})]})]}),Object(g.jsxs)(O.a.Footer,{children:[Object(g.jsx)(R.a,{variant:"secondary",size:"sm",onClick:function(){return C(!1)},children:"Cancel"}),Object(g.jsx)(R.a,{variant:"success",className:"float-right",size:"sm",onClick:function(){console.log(c),fetch("http://localhost:5000/api/users/".concat(a.user.user_id),{method:m?"PUT":"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(L.location.pathname)),L.push("/login"))})).then((function(){I(),C(!1)}))},children:m?"Save":"Add"})]})]});if(m&&Object.keys(l).length)return Object(g.jsxs)(q.a,{children:[Object(g.jsx)(Z.a,{children:Object(g.jsxs)(O.a,{border:l.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(g.jsx)(O.a.Header,{children:l.watch_status?"Watched":"Plan to watch"}),Object(g.jsxs)(Q.a,{className:"list-group-flush",children:[Object(g.jsx)(X.a,{children:Object(g.jsxs)(O.a.Text,{children:["Your score:",Object(g.jsx)("br",{}),Object(g.jsx)(ne.a,{name:"read-only",value:.5*l.score,max:5,precision:.5,size:"small",readOnly:!0,emptyIcon:Object(g.jsx)(oe.a,{fontSize:"inherit"})})]})}),Object(g.jsxs)(X.a,{children:[Object(g.jsx)(O.a.Title,{children:"Your review:"}),Object(g.jsx)(O.a.Text,{children:l.review})]})]}),Object(g.jsx)(O.a.Footer,{children:Object(g.jsx)(R.a,{size:"sm",onClick:function(){return C(!0)},children:"Edit"})})]})}),e.showLists?Object(g.jsx)(ye,{lists:y}):Object(g.jsx)(g.Fragment,{})]})}return Object(g.jsx)(g.Fragment,{})},ye=function(e){var t=Object(n.useContext)(p),s=Object(u.f)();return Object(g.jsx)(Z.a,{children:Object(g.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(g.jsx)("div",{style:{marginBottom:"10px"},children:"Present in lists:"}),e.lists.length?e.lists.map((function(e){return Object(g.jsxs)(R.a,{size:"sm",style:{marginBottom:"10px"},onClick:function(){return s.push({pathname:"/users/".concat(t.user.user_id,"/lists"),state:{selected_list:e}})},children:[" ",e.is_private?Object(g.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(g.jsx)(g.Fragment,{}),e.list_name]},e.list_id)})):Object(g.jsx)(R.a,{size:"sm",variant:"secondary",style:{marginBottom:"10px"},disabled:!0,children:"Not in any :("})]})})},we=function(e){var t=Object(n.useState)([]),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useState)([]),i=Object(T.a)(a,2),r=i[0],l=i[1],h=Object(n.useState)(!1),j=Object(T.a)(h,2),d=j[0],u=j[1];Object(n.useEffect)((function(){console.log(e),b()}),[]);var b=function(){console.log(e),fetch("http://localhost:5000/api/movies/".concat(e.movie_id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(o(e.ratings),l(e.friends.map((function(e){return e.user_id2}))))}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ee.a,{style:{marginBottom:"50px"},variant:d?"success":"secondary",title:d?"Reviews from friends":"Reviews from everyone",children:Object(g.jsx)(te.a.Item,{eventKey:"1",onClick:function(){return u(!d)},children:d?"Reviews from everyone":"Reviews from friends"})}),c.length?c.filter((function(e){return!d||r.includes(e.user_id)})).map((function(e){return Object(g.jsxs)(O.a,{style:{marginBottom:"50px"},children:[Object(g.jsx)(O.a.Header,{children:e.username}),Object(g.jsx)(O.a.Body,{children:Object(g.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(g.jsxs)("p",{children:[' "',e.review,'" ']}),Object(g.jsx)(O.a.Subtitle,{children:Object(g.jsx)(ne.a,{name:"read-only",value:.5*e.score,max:5,precision:.5,size:"small",emptyIcon:Object(g.jsx)(oe.a,{fontSize:"inherit"}),readOnly:!0})})]})})]},e.user_id)})):Object(g.jsx)(O.a,{style:{marginBottom:"50px"},children:Object(g.jsx)(O.a.Body,{children:"No reviews :("})})]})},Se=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e,n){var c;return Object(i.a)(this,s),(c=t.call(this,e,n)).state={movie_id:c.props.movie_id,movie:[],genres:[],people:[],AdminFlag:0},c.AddShowsToggle=function(e,t){if("ADM"===c.context.user.user_role)return Object(g.jsx)(R.a,{variant:"warning",style:{marginBottom:"30px"},onClick:function(){c.props.history.push({pathname:"/shows/",state:{movie_id:e,movie_name:t}}),console.log("In AddShowsToggle",c.state.movie.movie_id,c.state.movie.movie_title)},block:!0,children:"Add Show [FOR ADMINS ONLY]"})},c.fetchMovie(c.state.movie_id),console.log(c.props),console.log(n),c}return Object(r.a)(s,[{key:"fetchMovie",value:function(e){var t=this;fetch("http://localhost:5000/api/movies/".concat(e),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({movie:e}),t.setState({people:e.people}),t.setState({genres:e.genres}),console.log(t.state.people),console.log(t.state.genres)}))}},{key:"render",value:function(){var e=this;return console.log("hi2"),Object(g.jsxs)(K.a,{children:[Object(g.jsxs)(q.a,{children:[Object(g.jsxs)(Z.a,{children:[Object(g.jsx)(se.a,{src:this.state.movie.poster_url,style:{width:"350px",height:"calc(350px * (40/27))"},thumbnail:!0}),Object(g.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:Object(g.jsx)(ne.a,{name:"read-only",value:.5*this.state.movie.avg_rating,max:5,precision:.1,size:"large",readOnly:!0,emptyIcon:Object(g.jsx)(oe.a,{fontSize:"inherit"})})})]}),Object(g.jsxs)(Z.a,{children:[Object(g.jsx)("h1",{className:"display-4",children:this.state.movie.movie_title}),this.state.genres.map((function(e){return Object(g.jsx)("div",{children:_e(e.genre_name)},e.genre_id)})),this.state.movie.movie_description,Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(R.a,{variant:"danger",style:{marginBottom:"30px"},onClick:function(){e.props.history.push({pathname:"/movies/".concat(e.state.movie.movie_id,"/shows"),state:{movie_id:e.state.movie.movie_id}}),console.log(e.state.movie.movie_id)},block:!0,children:"Book"}),this.AddShowsToggle(this.state.movie.movie_id,this.state.movie.movie_title),Object(g.jsx)(ve,{movie_id:this.props.movie_id,showLists:!0},this.props.movie_id)]})]}),Object(g.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent person",children:this.state.people.map((function(e){return Object(g.jsx)("div",{className:"p-2 bd-highlight col-example",children:Object(g.jsxs)(O.a,{border:"secondary",style:{width:"160px",height:"300px"},children:[Object(g.jsx)(O.a.Header,{children:"NULL"==e.person_role?"Crew":"Cast"}),Object(g.jsx)(O.a.Img,{variant:"top",src:e.profile_url,className:"img-fluid",style:{width:"auto",height:"150px"}}),Object(g.jsxs)(O.a.Body,{children:[Object(g.jsx)(O.a.Title,{children:e.person_name}),Object(g.jsx)(O.a.Text,{children:"NULL"==e.person_role?_e(e.cast_or_crew):"As "+ke(e.person_role)})]})]})},e.person_id)}))}),Object(g.jsx)(we,{movie_id:this.state.movie_id})]})}}]),s}(n.Component);function _e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ke(e){var t,s=e.split('"'),n="";for(t=1;t<s.length-1;t+=1)n+=s[t],t%2==0&&(n+=" ");return n}Se.contextType=p;var Ce=Object(u.h)(Se),Te=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.match.params.id},console.log(e),n}return Object(r.a)(s,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(K.a,{fluid:!0,children:[Object(g.jsx)(Y,{}),Object(g.jsx)("br",{}),Object(g.jsxs)(q.a,{children:[Object(g.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(g.jsx)(C,{})}),Object(g.jsx)(Z.a,{xs:10,children:Object(g.jsx)(Ce,{movie_id:this.state.movie_id})})]})]})})}}]),s}(n.Component),Le=Object(u.h)(Te),Ie=s(242),De=s(195),Be=s(246),Ne=s(243),Ae=s(251),Ee=s(248),Ue=s(241);function Fe(e){return Object(g.jsx)(Ee.a,Object(j.a)({elevation:6,variant:"filled"},e))}var Re=Object(Ue.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),We=Object(u.h)((function(){var e=Re(),t=Object(n.useState)(!1),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useContext)(p),i=Object(u.f)(),r=Object(n.useState)(""),l=Object(T.a)(r,2),h=l[0],j=l[1],b=Object(n.useState)(""),O=Object(T.a)(b,2),m=O[0],x=O[1];return Object(g.jsxs)(Ie.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(g.jsx)(De.a,{children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Login"})}),Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(g.jsxs)(Ne.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return j(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return x(e.target.value)}})})]})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(D.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){fetch("http://localhost:5000/api/login",{method:"POST",body:JSON.stringify({username:h,password:m}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),a.loginUser(),console.log(localStorage.getItem("lastLoc")),i.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Login"})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,align:"center",children:Object(g.jsxs)(De.a,{children:["Don't have an account?"," ",Object(g.jsx)(d.b,{to:"/signup",style:{textDecoration:"none",color:"#3f50b5"},children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Sign up"})})]})})]})}),Object(g.jsx)(Ae.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&o(!1)},children:Object(g.jsx)(Fe,{severity:"error",children:"Your form details are not valid!"})})]})})),ze=(s(177),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.location.state.movie_id,shows:[]},n.fetchShows(n.state.movie_id),n}return Object(r.a)(s,[{key:"fetchShows",value:function(e){var t=this;fetch("http://localhost:5000/api/movies/".concat(e,"/shows"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({shows:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"ShowList",children:this.state.shows.map((function(t){return Object(g.jsx)("div",{className:"d-flex flex-column bd-highlight mb-3",children:Object(g.jsxs)(O.a,{bg:"dark",text:"light",children:[Object(g.jsx)(O.a.Header,{as:"h5",children:"Featured"}),Object(g.jsxs)(O.a.Body,{children:[Object(g.jsx)(O.a.Title,{children:t.theatre_mall}),Object(g.jsx)(O.a.Text,{children:t.date_time}),Object(g.jsx)(R.a,{variant:"success",onClick:function(){e.props.history.push({pathname:"/shows/".concat(t.show_id,"/seats"),state:{show_id:t.show_id}}),console.log(t.show_id)},children:"Book Show"})]})]})},t.show_id)}))})}}]),s}(n.Component)),Pe=Object(u.h)(ze),Me=(s(178),[]),He=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).SeatSelect=function(e){1==document.getElementById(e).classList.toggle("select")?Me.push(e):n.RemoveSeat(Me,e)},n.SeatCheck=function(e,t){return 0==t?Object(g.jsx)("button",{style:{width:"76px",height:"60px",backgroundColor:"red",borderRadius:"20px",boxShadow:"3px 4px"},id:e,children:e}):Object(g.jsx)("button",{style:{width:"76px",height:"60px",borderRadius:"20px",boxShadow:"3px 4px"},id:e,onClick:function(){return n.SeatSelect(e)},children:e})},n.SortSeats=function(e){var t,s;for(t=0;t<e.length;t++)for(s=0;s<e.length-1;s++){var n=parseInt(e[s].seat_code.slice(1)),c=parseInt(e[s+1].seat_code.slice(1)),o=e[s].seat_code.charAt(0),a=e[s+1].seat_code.charAt(0);if(0==o.localeCompare(a)&&n>c){var i=e[s];e[s]=e[s+1],e[s+1]=i}}return e},n.state={show_id:n.props.location.state.show_id,seats:[]},n.fetchSeats(n.state.show_id),n}return Object(r.a)(s,[{key:"RemoveSeat",value:function(e,t){var s=e.indexOf(t);return s>-1&&e.splice(s,1),e}},{key:"fetchSeats",value:function(e){var t=this;fetch("http://localhost:5000/api/shows/".concat(e,"/seats"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({seats:t.SortSeats(e)}),console.log("Sorted seats:",t.SortSeats(e))}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("br",{}),Object(g.jsx)("p",{className:"seattitle",children:"SELECT YOUR SEATS"}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{class:"container-xxl",style:{border:"10px solid black",marginLeft:"10px",marginRight:"10px",marginTop:"10px",backgroundColor:"grey"},children:Object(g.jsx)(q.a,{children:this.state.seats.map((function(t){return Object(g.jsxs)(Z.a,{children:[Object(g.jsx)("br",{}),e.SeatCheck(t.seat_code,t.seat_status),Object(g.jsx)("br",{})]},t.seat_code)}))})}),Object(g.jsx)("hr",{size:"30px",color:"blue"}),Object(g.jsx)("p",{className:"screen",children:"SCREEN HERE"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(R.a,{variant:"success",style:{width:"50%",height:"100px",marginRight:"25%",marginLeft:"25%",fontSize:"30px",borderRadius:"100px"},onClick:function(){e.props.history.push({pathname:"/shows/".concat(e.state.show_id,"/book"),state:{SeatsBooked:Me,show_id:e.state.show_id}})},children:"Proceed to pay"})]})}}]),s}(n.Component),Ge=Object(u.h)(He);s(141);s(191);var Je=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={BSeats:n.props.location.state.SeatsBooked,show_id:n.props.location.state.show_id},console.log(n.state.BSeats),n}return Object(r.a)(s,[{key:"Book",value:function(e,t){var s=this;fetch("http://localhost:5000/api/shows/".concat(t,"/book"),{method:"POST",body:JSON.stringify({seats:e,paymentDeets:"hi"}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){s.setState({seats:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"GPay",children:[Object(g.jsx)("p",{className:"Thanks",children:"Thank you! Please complete your booking by paying below. Make sure to receive your ticket! Enjoy"}),Object(g.jsx)(R.a,{variant:"info",size:"lg",block:!0,children:"Payment Gateway"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(R.a,{variant:"success",size:"lg",onClick:function(){return e.Book(e.state.BSeats,e.state.show_id)},block:!0,style:{boxShadow:"3px 4px"},children:"Send ticket"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(R.a,{variant:"warning",size:"lg",block:!0,onClick:function(){e.props.history.push("/")},children:"Back to Home"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})}}]),s}(n.Component),Ye=Object(u.h)(Je),Ke=function(e){var t=Object(n.useState)({}),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useState)(!1),i=Object(T.a)(a,2),r=i[0],l=i[1],h=function(e,t){console.log(e),console.log(t),o({movie_id:e,movie_title:t}),l(!0)},j=function(){return r?Object(g.jsx)("div",{children:Object(g.jsx)(R.a,{onClick:function(){return l(!1)},style:{marginBottom:"10px"},children:c.movie_title})}):Object(g.jsx)(H,{entryDialogue:!0,sendResult:h})};return Object(g.jsxs)(le.a,{show:e.show,children:[Object(g.jsx)(le.a.Header,{closeButton:!0,children:Object(g.jsx)(le.a.Title,{children:"Add a movie"})}),Object(g.jsxs)(le.a.Body,{children:[Object(g.jsx)(j,{}),r?Object(g.jsx)(ve,{movie_id:c.movie_id,showList:!1},c.movie_id):Object(g.jsx)(g.Fragment,{})]}),Object(g.jsx)(le.a.Footer,{children:Object(g.jsx)(R.a,{variant:"secondary",onClick:function(){o({}),e.closeDialogue()},children:"Close"})})]})},qe=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={showList:!1,showEntry:!1,showRating:!1,lists:[{list_id:0,list_name:"",is_private:0}],selected_list:{},refreshEntries:!0,selected_all:!0},n.showListDialogue=function(){n.setState({showList:!0})},n.closeListDialogue=function(){n.setState({showList:!1})},n.showEntryDialogue=function(e){console.log(e),n.setState({selected_list:e,showEntry:!0})},n.closeEntryDialogue=function(){n.setState({showEntry:!1})},n.showRatingDialogue=function(){n.setState({showRating:!0})},n.closeRatingDialogue=function(){n.setState({showRating:!1})},n.reloadEntries=function(){n.state.refreshEntries?n.setState({refreshEntries:!1,selected_all:!1}):n.setState({refreshEntries:!0,selected_all:!1})},n.reloadLists=function(){n.fetchLists()},n.componentDidMount=function(){n.fetchLists()},n.fetchLists=function(){fetch("http://localhost:5000/api/users/".concat(n.props.match.params.id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return console.log(e),200!=e.status&&(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")),e.json()})).then((function(e){console.log(e),void 0!=e.msg?(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")):0===Object.keys(n.state.selected_list).length&&e.length?(console.log(Object.keys(n.state.selected_list).length),console.log("1"),console.log(e),n.setState({lists:e,selected_list:e[0]})):(console.log(Object.keys(n.state.selected_list).length),n.setState({lists:e}))})).then((function(){n.props.location.state&&n.setState({selected_list:n.props.location.state.selected_list,selected_all:!1})}))},console.log(e.location),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(K.a,{fluid:!0,children:[Object(g.jsx)(Y,{}),Object(g.jsx)("br",{}),Object(g.jsxs)(q.a,{children:[Object(g.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(g.jsx)(C,{})}),Object(g.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(g.jsx)(K.a,{children:Object(g.jsx)(fe,{lists:this.state.lists,selected_list:this.state.selected_list,changeSelected:function(t){e.setState({selected_list:t})},setSelectedAll:function(t){return e.setState({selected_all:t})},selected_all:this.state.selected_all,showListDialogue:this.showListDialogue,showEntryDialogue:this.showEntryDialogue,showRatingDialogue:this.showRatingDialogue},this.state.lists.toString()+" "+this.state.refreshEntries.toString()+" "+this.state.selected_list.toString()+" "+this.state.selected_all.toString())})})]}),Object(g.jsx)(Oe,{selected_list:this.state.selected_list,show:this.state.showList,closeDialogue:this.closeListDialogue,reloadPage:this.reloadLists}),Object(g.jsx)(he,{list:this.state.selected_list,show:this.state.showEntry,closeDialogue:this.closeEntryDialogue,reloadPage:this.reloadEntries}),Object(g.jsx)(Ke,{show:this.state.showRating,closeDialogue:this.closeRatingDialogue,reloadPage:this.reloadEntries})]})})}}]),s}(n.Component),Ze=Object(u.h)(qe),Ve=s(236),$e=s(112),Qe=s.n($e);function Xe(e){return Object(g.jsx)(Ee.a,Object(j.a)({elevation:6,variant:"filled"},e))}var et=Object(Ue.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),tt=Object(u.h)((function(){var e=et(),t=Object(n.useState)(!1),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useState)(""),i=Object(T.a)(a,2),r=i[0],l=i[1],h=Object(n.useContext)(p),j=Object(u.f)(),b=Object(n.useState)(""),O=Object(T.a)(b,2),m=O[0],x=O[1],f=Object(n.useState)(""),v=Object(T.a)(f,2),y=v[0],w=v[1],S=Object(n.useState)(""),_=Object(T.a)(S,2),k=_[0],C=_[1],L=Object(n.useState)(0),I=Object(T.a)(L,2),B=I[0],N=I[1],A=Object(n.useState)(""),E=Object(T.a)(A,2),U=E[0],F=E[1],R=Object(n.useState)(!1),z=Object(T.a)(R,2),P=z[0],M=z[1],G=function(e,t){console.log(e,t),N(e),F(t),M(!0)},J=function(){return P?Object(g.jsxs)("div",{children:[Object(g.jsx)(D.a,{variant:"contained",children:U}),Object(g.jsx)(Ve.a,{"aria-label":"delete",onClick:function(){return M(!1)},children:Object(g.jsx)(Qe.a,{fontSize:"small"})})]}):Object(g.jsx)(H,{entryDialogue:!0,sendResult:G,type:"city"})};return Object(g.jsxs)(Ie.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(g.jsx)(De.a,{children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Sign up"})}),Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault()},autocomplete:"off",children:Object(g.jsxs)(Ne.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return x(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return w(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Email",name:"email",size:"small",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(J,{})})]})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(D.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k)?P?void fetch("http://localhost:5000/api/signup",{method:"POST",body:JSON.stringify({username:m,password:y,email:k,city_id:B}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?(l(e.error),o(!0)):(localStorage.setItem("jwt",e.jwt),h.loginUser(),console.log(localStorage.getItem("lastLoc")),j.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))})):(l("Please select a city from the given dropdown"),void o(!0)):(l("Your email is not valid!"),void o(!0))},children:"Sign up"})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,align:"center",children:Object(g.jsxs)(De.a,{children:["Already have an account?"," ",Object(g.jsx)(d.b,{to:"/login",style:{textDecoration:"none",color:"#3f50b5"},children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Login"})})]})})]})}),Object(g.jsx)(Ae.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&o(!1)},children:Object(g.jsx)(Xe,{severity:"error",children:r})})]})}));function st(e){return Object(g.jsx)(Ee.a,Object(j.a)({elevation:6,variant:"filled"},e))}var nt=Object(Ue.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),ct=Object(u.h)((function(){var e=nt(),t=Object(n.useState)(!1),s=Object(T.a)(t,2),c=s[0],o=s[1],a=Object(n.useState)(""),i=Object(T.a)(a,2),r=i[0],l=i[1],h=Object(n.useContext)(p),j=Object(u.f)(),b=Object(u.g)(),O=Object(n.useState)({}),m=Object(T.a)(O,2),x=m[0],f=m[1],v=Object(n.useState)({}),y=Object(T.a)(v,2),w=y[0],S=y[1],_=Object(n.useState)(0),k=Object(T.a)(_,2),C=k[0],L=k[1],I=Object(n.useState)(""),B=Object(T.a)(I,2),N=B[0],A=B[1],E=Object(n.useState)(!1),U=Object(T.a)(E,2),F=U[0],R=U[1];Object(n.useEffect)((function(){console.log(h.user),console.log(b),b.state.movie_id&&(f({movie_id:b.state.movie_id,movie_name:b.state.movie_name}),R(!0))}),[]);var z=function(e,t){console.log(e,t),f({movie_id:e,movie_name:t}),R(!0)},P=function(){return F?Object(g.jsxs)("div",{children:[x.movie_id,":",Object(g.jsx)(D.a,{variant:"contained",style:{marginLeft:"10px"},children:x.movie_name}),Object(g.jsx)(Ve.a,{"aria-label":"delete",onClick:function(){return R(!1)},children:Object(g.jsx)(Qe.a,{fontSize:"small"})})]}):Object(g.jsx)(H,{entryDialogue:!0,sendResult:z,type:"movie"})};return Object(g.jsxs)(Ie.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(g.jsx)(De.a,{children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Admin Console"})}),Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(g.jsxs)(Ne.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(P,{})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Theatre ID",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return S(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,label:"Ticket Price",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return L(e.target.value)}})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(W.a,{fullWidth:!0,variant:"outlined",id:"datetime-local",label:"Scheduled date and time",type:"datetime-local",className:e.textField,InputLabelProps:{shrink:!0},onChange:function(e){return A(e.target.value)}})})]})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,children:Object(g.jsx)(D.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){if(console.log(x,w,C,N),!F)return l("Please select a movie from the given dropdown"),void o(!0);if(""==N)return l("Please pick a date and time"),void o(!0);if(""==w)return l("Please pick a theatre"),void o(!0);if(""==C)return l("Please set a ticket price"),void o(!0);var e=N.split("T"),t=e[0]+" "+e[1]+":00";console.log(t),fetch("http://localhost:5000/api/shows/",{method:"POST",body:JSON.stringify({movie_id:x.movie_id,theatre_id:w,date_time:t,ticket_price:C}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),h.loginUser(),console.log(localStorage.getItem("lastLoc")),j.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Add Show"})}),Object(g.jsx)(Ne.a,{item:!0,xs:12,align:"center",children:Object(g.jsxs)(De.a,{children:["Not here to add a show?"," ",Object(g.jsx)(d.b,{to:"/",style:{textDecoration:"none",color:"#3f50b5"},children:Object(g.jsx)(Be.a,{fontWeight:"fontWeightBold",children:"Take me home"})})]})})]})}),Object(g.jsx)(Ae.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&o(!1)},children:Object(g.jsx)(st,{severity:"error",children:r})})]})})),ot=function(){return Object(g.jsx)(d.a,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(u.c,{children:[Object(g.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(g.jsx)($,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/movies/:id",render:function(e){return Object(g.jsx)(Le,Object(j.a)({},e),e.match.params.id)}}),Object(g.jsx)(u.a,{exact:!0,path:"/users/:id/lists",render:function(e){return Object(g.jsx)(Ze,Object(j.a)({},e),e.match.params.id)}}),Object(g.jsx)(u.a,{exact:!0,path:"/shows/:id/seats",render:function(){return Object(g.jsx)(Ge,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/shows/:id/book",render:function(){return Object(g.jsx)(Ye,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/movies/:id/shows",render:function(){return Object(g.jsx)(Pe,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/shows",render:function(){return Object(g.jsx)(ct,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/login",render:function(){return Object(g.jsx)(We,{})}}),Object(g.jsx)(u.a,{exact:!0,path:"/signup",render:function(){return Object(g.jsx)(tt,{})}})]})})})};var at=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).logout=function(){localStorage.clear(),n.setState({user:{}})},n.login=function(){fetch("http://localhost:5000/api/is-logged-in",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){e.logged_in?(n.setState({user:{profile_url:e.details.profile_url,user_role:e.details.user_role,user_id:e.details.user_id,username:e.details.username,city_id:e.details.city_id,city:e.details.city_name}}),console.log(n.state.user)):n.setState({user:{}}),console.log(e)}))},n.state={user:{}},n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.login()}},{key:"render",value:function(){var e={user:this.state.user,logoutUser:this.logout,loginUser:this.login};return Object(g.jsx)(p.Provider,{value:e,children:Object(g.jsx)(ot,{})})}}]),s}(n.Component),it=(s(192),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,259)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),o(e),a(e)}))});a.a.render(Object(g.jsx)(at,{}),document.getElementById("root")),it()}},[[193,1,2]]]);
//# sourceMappingURL=main.5d0f67ab.chunk.js.map