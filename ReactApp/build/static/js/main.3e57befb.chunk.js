(this.webpackJsonpshade=this.webpackJsonpshade||[]).push([[0],{119:function(e,t,s){},164:function(e,t,s){},180:function(e,t,s){},182:function(e,t,s){},195:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(18),i=s.n(a),o=s(81),r=s(14),l=s(15),j=s(17),d=s(16),h=s(28),u=s(50),b=s(9),p=s(95),O=(s.p,s(119),c.a.createContext()),x=s(59),m=(s(130),s(164),s(267)),g=s(62),f=s.n(g),v=s(1),y=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){return Object(r.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(x.a,{className:"movie",tag:"a",onClick:function(){e.props.history.push("/movies/".concat(e.props.movie.movie_id))},border:"none",style:{width:"250px",minheight:"470px",border:"none",borderRadius:"15px",boxShadow:"5px 5px #DEE2E6"},children:[Object(v.jsx)(x.a.Img,{variant:"top",src:this.props.movie.poster_url,style:{height:"calc(250px * (40/27))"}}),Object(v.jsx)(x.a.ImgOverlay,{}),Object(v.jsxs)(x.a.Body,{children:[Object(v.jsx)(x.a.Title,{children:this.props.movie.movie_title}),Object(v.jsx)(x.a.Text,{children:w(this.props.movie.release_date)})]}),Object(v.jsx)(x.a.Footer,{children:Object(v.jsx)(m.a,{name:"read-only",value:.5*this.props.movie.avg_rating,max:5,precision:.1,size:"small",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})})]})}}]),s}(n.Component);function w(e){var t=e.split(" "),s=t[1],n="",c=t[2],a=t[3];return n="1"==s.charAt(1)?"st":"2"==s.charAt(1)?"nd":"3"==s.charAt(1)?"rd":"th","0"==s.charAt(0)&&(s=s.charAt(1)),s+n+" "+c+" "+a}var S=Object(b.i)(y),_=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),n=t.call(this,e),console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:this.props.movies.map((function(e){return Object(v.jsx)("div",{style:{margin:"20px 20px"},className:"p-2 bd-highlight col-example home-page-movie",children:Object(v.jsx)(S,{movie:e})},e.movie_id)}))})}}]),s}(n.Component),k=Object(b.i)(_),C=s(263),T=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={},e.goToListPage=function(){Object.keys(e.context.user).length?e.props.history.push("/users/".concat(e.context.user.user_id,"/lists")):(localStorage.setItem("lastLoc","/"),e.props.history.push("/login"))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"side-bar-wrapper",style:{height:"500px",position:"sticky",top:"68px",width:"12vw"},children:Object(v.jsxs)(C.a,{className:"col-md-12 d-none d-md-block bg-dark sidebar",style:{minHeight:"100vh"},activeKey:"/home",children:[Object(v.jsx)("div",{className:"sidebar-sticky"}),Object(v.jsx)(C.a.Item,{children:Object(v.jsx)(C.a.Link,{onClick:this.goToListPage,children:"Lists"})}),Object(v.jsx)(C.a.Item,{children:Object(v.jsx)(C.a.Link,{href:"/home",children:"About Us"})}),Object(v.jsx)(C.a.Item,{children:Object(v.jsx)(C.a.Link,{href:"/friends",eventKey:"link-1",children:"Friends"})}),Object(v.jsx)(C.a.Item,{children:Object(v.jsx)(C.a.Link,{eventKey:"link-2",children:"Donate"})}),Object(v.jsx)(C.a.Item,{children:Object(v.jsx)(C.a.Link,{eventKey:"link-3",disabled:!0,children:"Merchandise"})})]})})}}]),s}(n.Component);T.contextType=O;var L=Object(b.i)(T),I=s(10),N=s(260),A=s(234),B=s(236),D=s(266),E=s(144),F=s(265),U=s(237),z=s(258),R=s(140),W=s(139),P=s(256),H=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.props.clickedOutside(!0)},n.wrapperRef=c.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{ref:this.wrapperRef,className:this.props.dropdownClasses,children:this.props.results.slice(0,10).map((function(t){return Object(v.jsx)(A.a.Item,{onClick:function(){e.props.entryDialogue?"user"==e.props.type?e.props.onClickUser(t.id,t.name,t.pic,t.city):e.props.onClick(t.id,t.name):e.props.history.push("/movies/".concat(t.id))},children:t.name},t.id)}))})}}]),s}(n.Component),M=Object(b.i)(H),G=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={city:"",user:"",movie:{title:"",genres:[],people:[]},results:[],typingTimout:0,dropdownClasses:"dropdown-menu"},e.clickedOutside=function(t){t&&e.setState({dropdownClasses:"dropdown-menu"})},e.changeName=function(t){e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.props.type&&"city"==e.props.type?e.setState({city:t.target.value}):e.props.type&&"user"==e.props.type?e.setState({user:t.target.value}):e.setState({movie:{title:"".concat(t.target.value),genres:e.state.movie.genres,people:e.state.movie.people}}),t.target.value&&(e.state.typingTimeout=setTimeout(e.timedSearch,500))},e.timedSearch=function(){"city"==e.props.type?e.searchCities(e.state.city).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.city_id,name:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):"user"==e.props.type?e.searchUsers(e.state.user).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.user_id,name:e.username,pic:e.profile_url,city:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.movie_id,name:e.movie_title}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})}))},e.searchMovie=function(e){return fetch("/api/search/movies",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchCities=function(e){return fetch("/api/search/cities",{method:"POST",body:JSON.stringify({city:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchUsers=function(e){return fetch("/api/search/users",{method:"POST",body:JSON.stringify({user:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.submitHandler=function(t){t.preventDefault(),e.props.entryDialogue||e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){e.props.history.push({pathname:"/",state:{movies:t}})})).then((function(){window.location.reload(!1)}))},e.clickHandler=function(t,s){e.clickedOutside(!0),e.props.sendResult(t,s)},e.clickHandlerUser=function(t,s,n,c){e.clickedOutside(!0),e.props.sendResult(t,s,n,c)},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.props.entryDialogue?Object(v.jsxs)(z.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",autoComplete:"off",children:[Object(v.jsx)(P.a,{fullWidth:!0,label:this.props.type?this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1):"Search for a movie...",name:"username",size:"small",variant:"outlined",onChange:this.changeName}),Object(v.jsx)(M,{type:this.props.type,onClick:this.clickHandler,onClickUser:this.clickHandlerUser,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]}):Object(v.jsxs)(z.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(v.jsx)(R.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:this.changeName}),Object(v.jsx)(W.a,{variant:"outline-success",type:"submit",children:"Search"}),Object(v.jsx)(M,{onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]})})}}]),s}(n.Component),K=Object(b.i)(G),J=function(){var e=Object(n.useContext)(O),t=Object(b.f)(),s=Object(b.g)(),a=c.a.useState(!1),i=Object(I.a)(a,2),o=i[0],r=i[1],l=c.a.useRef(null);return console.log(e),Object.keys(e.user).length?Object(v.jsxs)("div",{style:{border:"grey",borderWidth:"1px",borderRadius:"30px",borderStyle:"solid",padding:"5px",textAlign:"center"},onClick:function(){r((function(e){return!e}))},children:[e.user.profile_url?Object(v.jsx)(D.a,{src:e.user.profile_url,ref:l}):Object(v.jsx)(D.a,{ref:l,children:e.user.username.charAt(0).toUpperCase()}),Object(v.jsx)(E.a,{open:o,anchorEl:l.current,role:void 0,disablePortal:!0,transition:!0,children:Object(v.jsx)(F.a,{id:"menu-list-grow",children:Object(v.jsx)(U.a,{onClick:function(){return e.logoutUser()},children:"Logout"})})})]}):Object(v.jsx)("div",{children:Object(v.jsx)(B.a,{onClick:function(){localStorage.setItem("lastLoc",s.pathname),t.push("/login")},children:"Log in"})})},Y=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(N.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:[Object(v.jsx)(N.a.Brand,{children:"Dodo Shows"}),Object(v.jsx)(N.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsxs)(N.a.Collapse,{id:"basic-navbar-nav",children:[Object(v.jsxs)(C.a,{className:"mr-auto",children:[Object(v.jsx)(C.a.Link,{onClick:function(){e.props.history.push("/")},children:"Home"}),Object(v.jsx)(C.a.Link,{href:"#link",children:"Link"}),Object(v.jsx)(K,{entryDialogue:!1}),Object(v.jsxs)(A.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(v.jsx)(A.a.Item,{href:"#action/3.1",children:"Action"}),Object(v.jsx)(A.a.Item,{href:"#action/3.2",children:"Another action"}),Object(v.jsx)(A.a.Item,{href:"#action/3.3",children:"Something"}),Object(v.jsx)(A.a.Divider,{}),Object(v.jsx)(A.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(v.jsx)(J,{})]})]})}}]),s}(n.Component),q=Object(b.i)(Y),V=s(238),Z=s(141),$=s(239),Q=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movies:[]},n.fetchMovies=function(){fetch("/api/movies/",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({movies:e}),console.log(n.state.movies)}))},console.log(Object(p.a)(n)),e.location.state?(n.state={movies:e.location.state.movies},console.log(n.state)):n.fetchMovies(),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(q,{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(L,{})}),Object(v.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(v.jsx)($.a,{children:Object(v.jsx)(k,{movies:this.state.movies})})})]})]})}}]),s}(n.Component);Q.contextType=O;var X=Object(b.i)(Q),ee=s(243),te=s(142),se=s(244),ne=s(46),ce=s(245),ae=s(76),ie=s(77),oe=(s(180),s(145)),re=s(255),le=function(e){var t=Object(b.f)(),s=Object(n.useState)(""),c=Object(I.a)(s,2),a=(c[0],c[1],Object(n.useState)("")),i=Object(I.a)(a,2),o=(i[0],i[1],Object(n.useState)([])),r=Object(I.a)(o,2),l=r[0],j=r[1];var d=function(){j([]),e.closeDialogue()};return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsxs)(re.a.Title,{children:['Add Entry to list "',e.list.list_name,'"']})}),Object(v.jsxs)(re.a.Body,{children:[Object(v.jsx)(K,{entryDialogue:!0,sendResult:function(e,t){console.log(e),console.log(t),function(e,t){var s;for(s=0;s<t.length;s++)if(t[s].movie_id===e)return!0;return!1}(e,l)||j((function(s){return[].concat(Object(oe.a)(s),[{movie_id:e,movie_title:t}])}))}}),l.map((function(e){return Object(v.jsx)(W.a,{style:{margin:"10px"},onClick:function(){return t=e,void j(l.filter((function(e){return e!=t})));var t},children:e.movie_title},e.movie_id)}))]}),Object(v.jsxs)(re.a.Footer,{children:[Object(v.jsx)(W.a,{variant:"secondary",onClick:d,children:"Close"}),Object(v.jsx)(W.a,{variant:"primary",onClick:function(s){if(s.preventDefault(),console.log(localStorage.getItem("jwt")),l.length){var n=l.map((function(e){return e.movie_id}));console.log(n),fetch("/api/lists/".concat(e.list.list_id),{method:"POST",body:JSON.stringify({movie_ids:n}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){d(),e.reloadPage()}))}},children:"Add movies"})]})]})},je=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={},n.clicked=function(e){console.log("clicked"),n.props.history.push("/movies/".concat(e))},console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsx)("tbody",{children:this.props.items.map((function(t,s){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:s+1}),Object(v.jsx)("td",{onClick:function(){return e.clicked(t.movie_id)},children:t.movie_title}),Object(v.jsx)("td",{children:t.score?t.score/2:"--"}),Object(v.jsx)("td",{children:t.watch_status?"Watched":"Plan to watch"})]},t.movie_id.toString())}))})}}]),s}(n.Component),de=Object(b.i)(je),he=s(242),ue=s(240),be=s(261),pe=function(e){var t=Object(b.f)(),s=Object(n.useState)(""),c=Object(I.a)(s,2),a=c[0],i=c[1],o=Object(n.useState)(!1),r=Object(I.a)(o,2),l=r[0],j=r[1],d=Object(n.useContext)(O);return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsx)(re.a.Title,{children:"Add List"})}),Object(v.jsx)(re.a.Body,{children:Object(v.jsxs)(z.a,{onSubmit:function(s){s.preventDefault(),console.log(a),console.log(l),console.log(localStorage.getItem("jwt")),fetch("/api/lists/",{method:"POST",body:JSON.stringify({list_name:a,is_private:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),200!=e.status&&(console.log(d),localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){e.reloadPage()}))},children:[Object(v.jsxs)(z.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(z.a.Label,{children:"Username"}),Object(v.jsx)(z.a.Control,{type:"text",placeholder:"Enter List Name",onChange:function(e){return i(e.target.value)}})]}),Object(v.jsx)(z.a.Group,{controlId:"formBasicCheckbox",children:Object(v.jsx)(z.a.Check,{type:"checkbox",label:"Make this private",defaultChecked:l,onChange:function(e){return j(e.target.checked)}})}),Object(v.jsx)(W.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(v.jsxs)(re.a.Footer,{children:[Object(v.jsx)(W.a,{variant:"secondary",onClick:e.closeDialogue,children:"Close"}),Object(v.jsx)(W.a,{variant:"primary",children:"Save Changes"})]})]})},Oe=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={show:!1},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(W.a,{style:{marginTop:"20px"},onClick:this.props.onClick,children:"Add list"})}}]),s}(n.Component),xe=Object(b.i)(Oe),me=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e,n){var c;return Object(r.a)(this,s),(c=t.call(this,e,n)).state={entries:[],ratings:[],showWatched:!0,showUnwatched:!0,searchString:"",sortMode:1,sort:0},c.fetchEntries=function(){return fetch("/api/users/".concat(c.props.match.params.id,"/entries"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.fetchRatings=function(){return fetch("/api/users/".concat(c.props.match.params.id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.toggleWatched=function(){console.log("watched"),c.state.showWatched?c.setState({showWatched:!1}):c.setState({showWatched:!0})},c.toggleUnwatched=function(){console.log("unwatched"),c.state.showUnwatched?c.setState({showUnwatched:!1}):c.setState({showUnwatched:!0})},c.toggleSort=function(e){c.state.sortMode==e?-1==c.state.sort?c.setState({sort:1}):c.setState({sort:-1}):c.setState({sortMode:e})},console.log(c.props),c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.fetchEntries().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({entries:t})})),this.fetchRatings().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({ratings:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{children:Object(v.jsx)(ue.a,{control:Object(v.jsx)(be.a,{checked:this.state.showWatched,onChange:this.toggleWatched,name:"watched"}),label:"Watched"})}),Object(v.jsx)(Z.a,{children:Object(v.jsx)(ue.a,{control:Object(v.jsx)(be.a,{checked:this.state.showUnwatched,onChange:this.toggleUnwatched,name:"unwatched"}),label:"Plan to watch"})})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsxs)(Z.a,{xs:10,children:[Object(v.jsxs)(he.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:Object(v.jsxs)(z.a.Group,{as:V.a,controlId:"formHorizontalEmail",children:[Object(v.jsx)(z.a.Label,{column:!0,sm:2,children:"Movie"}),Object(v.jsx)(Z.a,{sm:10,children:Object(v.jsx)(R.a,{value:this.state.searchString,type:"text",placeholder:"Search...",onChange:function(t){return e.setState({searchString:t.target.value})}})})]})}),Object(v.jsxs)("th",{children:["Score",Object(v.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(1)}})]}),Object(v.jsxs)("th",{children:["Watch Status",Object(v.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(2)}})]})]})}),Object(v.jsx)(de,{items:this.props.selected_all?this.state.ratings.filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0})):this.state.entries.filter((function(t){return t.list_id==e.props.selected_list.list_id})).filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0}))},this.state.sort)]}),this.props.isOwner?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W.a,{style:{display:this.props.selected_all?"none":"block"},onClick:function(){return e.props.showEntryDialogue(e.props.selected_list)},children:"+ Add movie to this list"}),Object(v.jsx)(W.a,{style:{display:this.props.selected_all?"block":"none"},onClick:function(){return e.props.showRatingDialogue()},children:"+ Add movie"})]}):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsx)(Z.a,{children:Object(v.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(v.jsx)(W.a,{className:this.props.selected_all?"btn-success":null,style:{marginBottom:"20px"},onClick:function(){return e.props.setSelectedAll(!0)},children:"All"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),this.props.lists.map((function(t){return Object(v.jsxs)(W.a,{className:t.list_id!=e.props.selected_list.list_id||e.props.selected_all?"btn-primary":"btn-success",style:{marginBottom:"3px"},onClick:function(){e.props.setSelectedAll(!1),e.props.changeSelected(t)},children:[t.is_private?Object(v.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(v.jsx)(v.Fragment,{}),t.list_name]},t.list_id)})),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),this.props.isOwner?Object(v.jsx)(xe,{onClick:this.props.showListDialogue}):Object(v.jsx)(v.Fragment,{})]})})]})]})}}]),s}(n.Component);me.contextType=O;var ge=Object(b.i)(me),fe=function(e){var t=Object(n.useState)({movie_id:e.movie_id,watch_status:0,score:0,review:""}),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useContext)(O),o=Object(n.useState)({user_id:0,movie_id:0,watch_status:0,score:0,review:""}),r=Object(I.a)(o,2),l=r[0],j=r[1],d=Object(n.useState)(!1),u=Object(I.a)(d,2),p=u[0],g=u[1],y=Object(n.useState)([]),w=Object(I.a)(y,2),S=w[0],_=w[1],k=Object(n.useState)(!1),C=Object(I.a)(k,2),T=C[0],L=C[1],N=Object(b.f)();Object(n.useEffect)((function(){console.log(i.user),console.log(e),A(),e.showLists&&B()}),[i]);var A=function(){console.log(i.user),console.log(e),Object.keys(i.user).length&&fetch("/api/users/".concat(i.user.user_id,"/").concat(e.movie_id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(g(!0),j(e),L(!1),a((function(t){return Object(h.a)(Object(h.a)({},t),{},{watch_status:e.watch_status,score:e.score,review:e.review})})))}))},B=function(){console.log(i.user),console.log(e),Object.keys(i.user).length&&fetch("/api/users/".concat(i.user.user_id,"/movies/").concat(e.movie_id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&_(e)}))};if(console.log(Object.keys(l).length),Object.keys(i.user).length&&l){if(T)return Object(v.jsxs)(x.a,{border:c.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(v.jsx)(x.a.Header,{children:Object(v.jsx)(se.a,{variant:c.watch_status?"success":"secondary",title:c.watch_status?"Watched":"Plan to watch",children:Object(v.jsx)(ne.a.Item,{eventKey:"1",onClick:function(){return c.watch_status?a((function(e){return Object(h.a)(Object(h.a)({},e),{},{watch_status:0})})):a((function(e){return Object(h.a)(Object(h.a)({},e),{},{watch_status:1})}))},children:c.watch_status?"Plan to watch":"Watched"})})}),Object(v.jsxs)(ee.a,{className:"list-group-flush",children:[Object(v.jsx)(te.a,{children:Object(v.jsxs)(x.a.Text,{children:["Your score:",Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{name:"customized-empty",className:"user-rating",value:.5*c.score,max:5,precision:.5,size:"small",emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"}),onChange:function(e,t){a((function(e){return Object(h.a)(Object(h.a)({},e),{},{score:2*t})}))}})]})}),Object(v.jsxs)(te.a,{children:[Object(v.jsx)(x.a.Title,{children:"Your review:"}),Object(v.jsx)(x.a.Text,{children:Object(v.jsx)(z.a.Control,{as:"textarea",rows:3,defaultValue:c.review,onChange:function(e){a((function(t){return Object(h.a)(Object(h.a)({},t),{},{review:e.target.value})}))}})})]})]}),Object(v.jsxs)(x.a.Footer,{children:[Object(v.jsx)(W.a,{variant:"secondary",size:"sm",onClick:function(){return L(!1)},children:"Cancel"}),Object(v.jsx)(W.a,{variant:"success",className:"float-right",size:"sm",onClick:function(){console.log(c),fetch("/api/users/".concat(i.user.user_id),{method:p?"PUT":"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(N.location.pathname)),N.push("/login"))})).then((function(){A(),L(!1)}))},children:p?"Save":"Add"})]})]});if(p&&Object.keys(l).length)return Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{children:Object(v.jsxs)(x.a,{border:l.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(v.jsx)(x.a.Header,{children:l.watch_status?"Watched":"Plan to watch"}),Object(v.jsxs)(ee.a,{className:"list-group-flush",children:[Object(v.jsx)(te.a,{children:Object(v.jsxs)(x.a.Text,{children:["Your score:",Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{name:"read-only",value:.5*l.score,max:5,precision:.5,size:"small",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})]})}),Object(v.jsxs)(te.a,{children:[Object(v.jsx)(x.a.Title,{children:"Your review:"}),Object(v.jsx)(x.a.Text,{children:l.review})]})]}),Object(v.jsx)(x.a.Footer,{children:Object(v.jsx)(W.a,{size:"sm",onClick:function(){return L(!0)},children:"Edit"})})]})}),e.showLists?Object(v.jsx)(ve,{lists:S}):Object(v.jsx)(v.Fragment,{})]});if(!p)return Object(v.jsx)(W.a,{onClick:function(){return L(!0)},children:"Rate this movie"})}return Object(v.jsx)(v.Fragment,{})},ve=function(e){var t=Object(n.useContext)(O),s=Object(b.f)();return Object(v.jsx)(Z.a,{children:Object(v.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(v.jsx)("div",{style:{marginBottom:"10px"},children:"Present in lists:"}),e.lists.length?e.lists.map((function(e){return Object(v.jsxs)(W.a,{size:"sm",style:{marginBottom:"10px"},onClick:function(){return s.push({pathname:"/users/".concat(t.user.user_id,"/lists"),state:{selected_list:e}})},children:[" ",e.is_private?Object(v.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(v.jsx)(v.Fragment,{}),e.list_name]},e.list_id)})):Object(v.jsx)(W.a,{size:"sm",variant:"secondary",style:{marginBottom:"10px"},disabled:!0,children:"Not in any :("})]})})},ye=function(e){var t=Object(n.useState)([]),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)([]),o=Object(I.a)(i,2),r=o[0],l=o[1],j=Object(n.useState)(!1),d=Object(I.a)(j,2),h=d[0],u=d[1];Object(n.useEffect)((function(){console.log(e),b()}),[]);var b=function(){console.log(e),fetch("/api/movies/".concat(e.movie_id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(a(e.ratings),l(e.friends.map((function(e){return e.user_id2}))))}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(se.a,{style:{marginBottom:"50px"},variant:h?"success":"secondary",title:h?"Reviews from friends":"Reviews from everyone",children:Object(v.jsx)(ne.a.Item,{eventKey:"1",onClick:function(){return u(!h)},children:h?"Reviews from everyone":"Reviews from friends"})}),c.length?c.filter((function(e){return!h||r.includes(e.user_id)})).map((function(e){return Object(v.jsxs)(x.a,{style:{marginBottom:"50px"},children:[Object(v.jsx)(x.a.Header,{children:e.username}),Object(v.jsx)(x.a.Body,{children:Object(v.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(v.jsxs)("p",{children:[' "',e.review,'" ']}),Object(v.jsx)(x.a.Subtitle,{children:Object(v.jsx)(m.a,{name:"read-only",value:.5*e.score,max:5,precision:.5,size:"small",emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"}),readOnly:!0})})]})})]},e.user_id)})):Object(v.jsx)(x.a,{style:{marginBottom:"50px"},children:Object(v.jsx)(x.a.Body,{children:"No reviews :("})})]})},we=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e,n){var c;return Object(r.a)(this,s),(c=t.call(this,e,n)).state={movie_id:c.props.movie_id,movie:[],genres:[],people:[],AdminFlag:0},c.AddShowsToggle=function(e,t){if("ADM"===c.context.user.user_role)return Object(v.jsx)(W.a,{variant:"warning",style:{marginBottom:"30px"},onClick:function(){c.props.history.push({pathname:"/shows/",state:{movie_id:e,movie_name:t}}),console.log("In AddShowsToggle",c.state.movie.movie_id,c.state.movie.movie_title)},block:!0,children:"Add Show [FOR ADMINS ONLY]"})},c.fetchMovie(c.state.movie_id),console.log(c.props),console.log(n),c}return Object(l.a)(s,[{key:"fetchMovie",value:function(e){var t=this;fetch("/api/movies/".concat(e),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({movie:e}),t.setState({people:e.people}),t.setState({genres:e.genres}),console.log(t.state.people),console.log(t.state.genres)}))}},{key:"render",value:function(){var e=this;return console.log("hi2"),Object(v.jsxs)($.a,{children:[Object(v.jsxs)(V.a,{children:[Object(v.jsxs)(Z.a,{children:[Object(v.jsx)(ce.a,{src:this.state.movie.poster_url,style:{width:"350px",height:"calc(350px * (40/27))"},thumbnail:!0}),Object(v.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:Object(v.jsx)(m.a,{name:"read-only",value:.5*this.state.movie.avg_rating,max:5,precision:.1,size:"large",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})})]}),Object(v.jsxs)(Z.a,{children:[Object(v.jsx)("h1",{className:"display-4",children:this.state.movie.movie_title}),this.state.genres.map((function(e){return Object(v.jsx)("div",{children:Se(e.genre_name)},e.genre_id)})),this.state.movie.movie_description,Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(W.a,{variant:"danger",style:{marginBottom:"30px"},onClick:function(){e.props.history.push({pathname:"/movies/".concat(e.state.movie.movie_id,"/shows"),state:{movie_id:e.state.movie.movie_id}}),console.log(e.state.movie.movie_id)},block:!0,children:"Book"}),this.AddShowsToggle(this.state.movie.movie_id,this.state.movie.movie_title),Object(v.jsx)(fe,{movie_id:this.props.movie_id,showLists:!0},this.props.movie_id)]})]}),Object(v.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent person",children:this.state.people.map((function(e){return Object(v.jsx)("div",{className:"p-2 bd-highlight col-example",children:Object(v.jsxs)(x.a,{border:"secondary",style:{width:"160px",height:"300px"},children:[Object(v.jsx)(x.a.Header,{children:"NULL"==e.person_role?"Crew":"Cast"}),Object(v.jsx)(x.a.Img,{variant:"top",src:e.profile_url,className:"img-fluid",style:{width:"auto",height:"150px"}}),Object(v.jsxs)(x.a.Body,{children:[Object(v.jsx)(x.a.Title,{children:e.person_name}),Object(v.jsx)(x.a.Text,{children:"NULL"==e.person_role?Se(e.cast_or_crew):"As "+_e(e.person_role)})]})]})},e.person_id)}))}),Object(v.jsx)(ye,{movie_id:this.state.movie_id})]})}}]),s}(n.Component);function Se(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _e(e){var t,s=e.split('"'),n="";for(t=1;t<s.length-1;t+=1)n+=s[t],t%2==0&&(n+=" ");return n}we.contextType=O;var ke=Object(b.i)(we),Ce=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.match.params.id},console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)($.a,{fluid:!0,children:[Object(v.jsx)(q,{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(L,{})}),Object(v.jsx)(Z.a,{xs:10,children:Object(v.jsx)(ke,{movie_id:this.state.movie_id})})]})]})})}}]),s}(n.Component),Te=Object(b.i)(Ce),Le=s(247),Ie=s(91),Ne=s(257),Ae=s(248),Be=s(262),De=s(259),Ee=s(246);function Fe(e){return Object(v.jsx)(De.a,Object(h.a)({elevation:6,variant:"filled"},e))}var Ue=Object(Ee.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),ze=Object(b.i)((function(){var e=Ue(),t=Object(n.useState)(!1),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useContext)(O),o=Object(b.f)(),r=Object(n.useState)(""),l=Object(I.a)(r,2),j=l[0],d=l[1],h=Object(n.useState)(""),p=Object(I.a)(h,2),x=p[0],m=p[1];return Object(v.jsxs)(Le.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Ie.a,{children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Login"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return d(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return m(e.target.value)}})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(B.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){fetch("/api/login",{method:"POST",body:JSON.stringify({username:j,password:x}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),i.loginUser(),console.log(localStorage.getItem("lastLoc")),o.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Login"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Ie.a,{children:["Don't have an account?"," ",Object(v.jsx)(u.b,{to:"/signup",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Sign up"})})]})})]})}),Object(v.jsx)(Be.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(Fe,{severity:"error",children:"Your form details are not valid!"})})]})})),Re=(s(181),function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.location.state.movie_id,shows:[]},n.fetchShows(n.state.movie_id),n}return Object(l.a)(s,[{key:"fetchShows",value:function(e){var t=this;fetch("/api/movies/".concat(e,"/shows"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({shows:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"ShowList",children:this.state.shows.map((function(t){return Object(v.jsx)("div",{className:"d-flex flex-column bd-highlight mb-3",children:Object(v.jsxs)(x.a,{bg:"dark",text:"light",children:[Object(v.jsx)(x.a.Header,{as:"h5",children:"Featured"}),Object(v.jsxs)(x.a.Body,{children:[Object(v.jsx)(x.a.Title,{children:t.theatre_mall}),Object(v.jsx)(x.a.Text,{children:t.date_time}),Object(v.jsx)(W.a,{variant:"success",onClick:function(){e.props.history.push({pathname:"/shows/".concat(t.show_id,"/seats"),state:{show_id:t.show_id}}),console.log(t.show_id)},children:"Book Show"})]})]})},t.show_id)}))})}}]),s}(n.Component)),We=Object(b.i)(Re),Pe=(s(182),[]),He=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).SeatSelect=function(e){1==document.getElementById(e).classList.toggle("select")?Pe.push(e):n.RemoveSeat(Pe,e)},n.SeatCheck=function(e,t){return 0==t?Object(v.jsx)("button",{style:{width:"76px",height:"60px",backgroundColor:"red",borderRadius:"20px",boxShadow:"3px 4px"},id:e,children:e}):Object(v.jsx)("button",{style:{width:"76px",height:"60px",borderRadius:"20px",boxShadow:"3px 4px"},id:e,onClick:function(){return n.SeatSelect(e)},children:e})},n.SortSeats=function(e){var t,s;for(t=0;t<e.length;t++)for(s=0;s<e.length-1;s++){var n=parseInt(e[s].seat_code.slice(1)),c=parseInt(e[s+1].seat_code.slice(1)),a=e[s].seat_code.charAt(0),i=e[s+1].seat_code.charAt(0);if(0==a.localeCompare(i)&&n>c){var o=e[s];e[s]=e[s+1],e[s+1]=o}}return e},n.state={show_id:n.props.location.state.show_id,seats:[]},n.fetchSeats(n.state.show_id),n}return Object(l.a)(s,[{key:"RemoveSeat",value:function(e,t){var s=e.indexOf(t);return s>-1&&e.splice(s,1),e}},{key:"fetchSeats",value:function(e){var t=this;fetch("/api/shows/".concat(e,"/seats"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({seats:t.SortSeats(e)}),console.log("Sorted seats:",t.SortSeats(e))}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)("p",{className:"seattitle",children:"SELECT YOUR SEATS"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{class:"container-xxl",style:{border:"10px solid black",marginLeft:"10px",marginRight:"10px",marginTop:"10px",backgroundColor:"grey"},children:Object(v.jsx)(V.a,{children:this.state.seats.map((function(t){return Object(v.jsxs)(Z.a,{children:[Object(v.jsx)("br",{}),e.SeatCheck(t.seat_code,t.seat_status),Object(v.jsx)("br",{})]},t.seat_code)}))})}),Object(v.jsx)("hr",{size:"30px",color:"blue"}),Object(v.jsx)("p",{className:"screen",children:"SCREEN HERE"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(W.a,{variant:"success",style:{width:"50%",height:"100px",marginRight:"25%",marginLeft:"25%",fontSize:"30px",borderRadius:"100px"},onClick:function(){e.props.history.push({pathname:"/shows/".concat(e.state.show_id,"/book"),state:{SeatsBooked:Pe,show_id:e.state.show_id}})},children:"Proceed to pay"})]})}}]),s}(n.Component),Me=Object(b.i)(He);s(143);s(195);var Ge=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={BSeats:n.props.location.state.SeatsBooked,show_id:n.props.location.state.show_id},console.log(n.state.BSeats),n}return Object(l.a)(s,[{key:"Book",value:function(e,t){var s=this;fetch("/api/shows/".concat(t,"/book"),{method:"POST",body:JSON.stringify({seats:e,paymentDeets:"hi"}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){s.setState({seats:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"GPay",children:[Object(v.jsx)("p",{className:"Thanks",children:"Thank you! Please complete your booking by paying below. Make sure to receive your ticket! Enjoy"}),Object(v.jsx)(W.a,{variant:"info",size:"lg",block:!0,children:"Payment Gateway"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(W.a,{variant:"success",size:"lg",onClick:function(){return e.Book(e.state.BSeats,e.state.show_id)},block:!0,style:{boxShadow:"3px 4px"},children:"Send ticket"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(W.a,{variant:"warning",size:"lg",block:!0,onClick:function(){e.props.history.push("/")},children:"Back to Home"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]})}}]),s}(n.Component),Ke=Object(b.i)(Ge),Je=s(201),Ye=s(249),qe=function(e){var t=Object(n.useState)({}),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(!1),o=Object(I.a)(i,2),r=o[0],l=o[1],j=function(e,t){console.log(e),console.log(t),a({movie_id:e,movie_title:t}),l(!0)},d=function(){return r?Object(v.jsx)("div",{children:Object(v.jsx)(W.a,{onClick:function(){return l(!1)},style:{marginBottom:"10px"},children:c.movie_title})}):Object(v.jsx)(K,{entryDialogue:!0,sendResult:j})};return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsx)(re.a.Title,{children:"Add a movie"})}),Object(v.jsxs)(re.a.Body,{children:[Object(v.jsx)(d,{}),r?Object(v.jsx)(fe,{movie_id:c.movie_id,showList:!1},c.movie_id):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsx)(re.a.Footer,{children:Object(v.jsx)(W.a,{variant:"secondary",onClick:function(){a({}),l(!1),e.closeDialogue()},children:"Close"})})]})},Ve=function(){var e=Object(n.useContext)(O),t=Object(n.useState)({username:"",profile_url:""}),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(b.h)();Object(n.useEffect)((function(){console.log(e.user),console.log(i),i.id!=e.user.user_id?o():a(e.user)}),[e]);var o=function(){fetch("/api/users/".concat(i.id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){a(e)}))};return void 0!=c.username?Object(v.jsxs)(v.Fragment,{children:[c.profile_url?Object(v.jsx)(D.a,{src:c.profile_url,style:{marginLeft:"20px"}}):Object(v.jsx)(D.a,{style:{marginLeft:"15px"},children:c.username.charAt(0).toUpperCase()}),Object(v.jsx)(Je.a,{children:Object(v.jsx)(Ye.a,{primary:"".concat(c.username,"'s lists")})})]}):Object(v.jsx)(v.Fragment,{})},Ze=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={showList:!1,showEntry:!1,showRating:!1,lists:[{list_id:0,list_name:"",is_private:0}],selected_list:{},refreshEntries:!0,selected_all:!0},n.showListDialogue=function(){n.setState({showList:!0})},n.closeListDialogue=function(){n.setState({showList:!1})},n.showEntryDialogue=function(e){console.log(e),n.setState({selected_list:e,showEntry:!0})},n.closeEntryDialogue=function(){n.setState({showEntry:!1})},n.showRatingDialogue=function(){n.setState({showRating:!0})},n.closeRatingDialogue=function(){n.setState({showRating:!1})},n.reloadEntries=function(){n.state.refreshEntries?n.setState({refreshEntries:!1,selected_all:!1}):n.setState({refreshEntries:!0,selected_all:!1})},n.reloadLists=function(){n.fetchLists()},n.componentDidMount=function(){n.fetchLists()},n.fetchLists=function(){fetch("/api/users/".concat(n.props.match.params.id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return console.log(e),200!=e.status&&(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")),e.json()})).then((function(e){console.log(e),void 0!=e.msg?(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")):0===Object.keys(n.state.selected_list).length&&e.length?(console.log(Object.keys(n.state.selected_list).length),console.log("1"),console.log(e),n.setState({lists:e,selected_list:e[0]})):(console.log(Object.keys(n.state.selected_list).length),n.setState({lists:e}))})).then((function(){n.props.location.state&&n.setState({selected_list:n.props.location.state.selected_list,selected_all:!1})}))},console.log(e.location),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)($.a,{fluid:!0,children:[Object(v.jsx)(q,{}),Object(v.jsx)("br",{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(L,{})}),Object(v.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(v.jsxs)($.a,{children:[Object(v.jsx)(Ve,{}),Object(v.jsx)(ge,{isOwner:this.context.user.user_id==this.props.match.params.id,lists:this.state.lists,selected_list:this.state.selected_list,changeSelected:function(t){e.setState({selected_list:t})},setSelectedAll:function(t){return e.setState({selected_all:t})},selected_all:this.state.selected_all,showListDialogue:this.showListDialogue,showEntryDialogue:this.showEntryDialogue,showRatingDialogue:this.showRatingDialogue},this.state.lists.toString()+" "+this.state.refreshEntries.toString()+" "+this.state.selected_list.toString()+" "+this.state.selected_all.toString())]})})]}),Object(v.jsx)(pe,{selected_list:this.state.selected_list,show:this.state.showList,closeDialogue:this.closeListDialogue,reloadPage:this.reloadLists}),Object(v.jsx)(le,{list:this.state.selected_list,show:this.state.showEntry,closeDialogue:this.closeEntryDialogue,reloadPage:this.reloadEntries}),Object(v.jsx)(qe,{show:this.state.showRating,closeDialogue:this.closeRatingDialogue,reloadPage:this.reloadEntries})]})})}}]),s}(n.Component);Ze.contextType=O;var $e=Object(b.i)(Ze),Qe=s(241),Xe=s(72),et=s.n(Xe);function tt(e){return Object(v.jsx)(De.a,Object(h.a)({elevation:6,variant:"filled"},e))}var st=Object(Ee.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),nt=Object(b.i)((function(){var e=st(),t=Object(n.useState)(!1),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(""),o=Object(I.a)(i,2),r=o[0],l=o[1],j=Object(n.useContext)(O),d=Object(b.f)(),h=Object(n.useState)(""),p=Object(I.a)(h,2),x=p[0],m=p[1],g=Object(n.useState)(""),f=Object(I.a)(g,2),y=f[0],w=f[1],S=Object(n.useState)(""),_=Object(I.a)(S,2),k=_[0],C=_[1],T=Object(n.useState)(0),L=Object(I.a)(T,2),N=L[0],A=L[1],D=Object(n.useState)(""),E=Object(I.a)(D,2),F=E[0],U=E[1],z=Object(n.useState)(!1),R=Object(I.a)(z,2),W=R[0],H=R[1],M=function(e,t){console.log(e,t),A(e),U(t),H(!0)},G=function(){return W?Object(v.jsxs)("div",{children:[Object(v.jsx)(B.a,{variant:"contained",children:F}),Object(v.jsx)(Qe.a,{"aria-label":"delete",onClick:function(){return H(!1)},children:Object(v.jsx)(et.a,{fontSize:"small"})})]}):Object(v.jsx)(K,{entryDialogue:!0,sendResult:M,type:"city"})};return Object(v.jsxs)(Le.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Ie.a,{children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Sign up"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},autocomplete:"off",children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return m(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return w(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Email",name:"email",size:"small",variant:"outlined",onChange:function(e){return C(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(G,{})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(B.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k)?W?void fetch("/api/signup",{method:"POST",body:JSON.stringify({username:x,password:y,email:k,city_id:N}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?(l(e.error),a(!0)):(localStorage.setItem("jwt",e.jwt),j.loginUser(),console.log(localStorage.getItem("lastLoc")),d.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))})):(l("Please select a city from the given dropdown"),void a(!0)):(l("Your email is not valid!"),void a(!0))},children:"Sign up"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Ie.a,{children:["Already have an account?"," ",Object(v.jsx)(u.b,{to:"/login",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Login"})})]})})]})}),Object(v.jsx)(Be.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(tt,{severity:"error",children:r})})]})})),ct=s(250),at=s(251),it=s(252),ot=s(253),rt=s(254);var lt=function(e){var t=Object(b.f)(),s=Object(n.useState)({border:"",text:"Add Friend",buttonVariant:"success",logo:Object(v.jsx)(ct.a,{style:{verticalAlign:"text-bottom"}})}),c=Object(I.a)(s,2),a=c[0],i=c[1],o=Object(n.useState)(e.friendStat),r=Object(I.a)(o,2),l=r[0],j=r[1];Object(n.useEffect)((function(){switch(l){case 0:i({border:"",text:"Add Friend",buttonVariant:"success",logo:Object(v.jsx)(ct.a,{style:{verticalAlign:"text-bottom"}})});break;case 1:i({border:"warning",text:"Cancel Req",buttonVariant:"danger",logo:Object(v.jsx)(at.a,{style:{verticalAlign:"text-bottom"}})});break;case 2:i({border:"success",text:"Unfriend",buttonVariant:"danger",logo:Object(v.jsx)(it.a,{style:{verticalAlign:"text-bottom"}})});break;case 3:i({border:"warning",text:"Accept",buttonVariant:"success",logo:Object(v.jsx)(ot.a,{style:{verticalAlign:"text-bottom"}})})}}),[l]);var d=function(e){fetch("/api/users/unfriend/".concat(e),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),console.log("removed friend ".concat(e)),j(0)};return Object(v.jsxs)($.a,{children:[Object(v.jsx)("br",{}),Object(v.jsx)(x.a,{border:a.border,style:{width:"12rem",borderWidth:"1.5px",border:"solid",boxShadow:"0 2.8px 2.2px rgba(0, 0, 0, 0.034),0 6.7px 5.3px rgba(0, 0, 0, 0.048),0 12.5px 10px rgba(0, 0, 0, 0.06), 0 22.3px 17.9px rgba(0, 0, 0, 0.072),0 41.8px 33.4px rgba(0, 0, 0, 0.086),0 100px 80px rgba(0, 0, 0, 0.12)",borderColor:"#DEE2E6",maxHeight:"20rem",borderRadius:"15px"},children:Object(v.jsxs)(x.a.Body,{children:[Object(v.jsx)(ce.a,{style:{minHeight:"146px",minWidth:"146px"},src:e.pic,roundedCircle:!0,fluid:!0,thumbnail:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(x.a.Title,{onClick:function(){return t.push("/users/".concat(e.personKey,"/lists"))},children:e.name}),Object(v.jsx)(x.a.Subtitle,{className:"mb-2 text-muted",children:e.city}),3!=l?Object(v.jsxs)(W.a,{size:"sm",onClick:function(){return 0===l?(t=e.personKey,fetch("/api/users/request/".concat(t),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),void j(1)):d(e.personKey);var t},variant:a.buttonVariant,children:[a.logo," ",a.text]}):Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsxs)(W.a,{size:"sm",onClick:function(){return t=e.personKey,console.log("trying to accept req from ".concat(t)),fetch("/api/users/accept/".concat(t),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),void j(2);var t},variant:"success",children:[Object(v.jsx)(rt.a,{style:{verticalAlign:"text-bottom"}})," ","Accept"]}),Object(v.jsx)(W.a,{onClick:function(){d(e.personKey)},size:"sm",variant:"secondary",children:Object(v.jsx)(it.a,{})})]})]})})]})};s(196);var jt=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(""),i=Object(I.a)(a,2),o=(i[0],i[1],Object(n.useContext)(O)),r=o.user.profile_url,l=o.user.username,j=function(e){console.log("injecting to DB ".concat(e)),fetch("/api/users/".concat(o.user.user_id,"/update/profile"),{method:"PUT",body:JSON.stringify({profile_url:e}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"content-wrapper",children:Object(v.jsx)("div",{className:"real-content-wrapper",style:{width:"100%"},children:Object(v.jsxs)("div",{className:"profile-card-wrapper",children:[Object(v.jsxs)("div",{className:"avatar-row",children:[Object(v.jsx)("div",{className:"nondecor",children:Object(v.jsx)("div",{className:"avatar-wrapper",children:Object(v.jsx)(D.a,{alt:l,src:r,style:{height:"100px",width:"100px"},children:"A"})})}),Object(v.jsxs)("div",{className:"editbutton",children:[Object(v.jsx)("input",{accept:"image/*",id:"icon-button-file",type:"file",onChange:function(e){return c(e.target.files[0])}}),Object(v.jsx)(B.a,{variant:"contained",onClick:function(){console.log(s);var e=new FormData;e.append("upload_preset","pkftr8lo"),e.append("file",s),fetch("https://api.cloudinary.com/v1_1/dcowmd6uf/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){if(!e.error)return console.log("url below :"),console.log(e.url),j(e.url),e;console.log(e.error)}))},children:"UPLOAD"})]})]}),Object(v.jsxs)("div",{id:"username",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"Username"}),Object(v.jsx)("h5",{style:{width:"370px"},children:l})]}),Object(v.jsxs)("div",{className:"label-wrapper",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"Email"}),Object(v.jsx)("h5",{style:{width:"370px"},children:o.user.email})]}),Object(v.jsxs)("div",{className:"label-wrapper",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"City"}),Object(v.jsx)("h5",{style:{width:"370px"},children:o.user.city})]})]})})})})};s(197);var dt=function(){var e=Object(n.useContext)(O),t=Object(n.useState)(""),s=Object(I.a)(t,2),c=(s[0],s[1],Object(n.useState)("")),a=Object(I.a)(c,2),i=(a[0],a[1],Object(n.useState)([])),o=Object(I.a)(i,2),r=o[0],l=o[1],j=Object(n.useState)([]),d=Object(I.a)(j,2),h=d[0],u=d[1],b=Object(n.useState)([]),p=Object(I.a)(b,2),x=p[0],m=p[1],g=Object(n.useState)([]),f=Object(I.a)(g,2),y=f[0],w=f[1],S=Object(n.useState)([]),_=Object(I.a)(S,2),k=_[0],C=_[1],T=Object(n.useState)([]),N=Object(I.a)(T,2),A=N[0],B=N[1];Object(n.useEffect)((function(){console.log(e),void 0!=e.user.user_id&&Q()}),[e]);var D=Object(n.useState)(!1),E=Object(I.a)(D,2),F=E[0],U=E[1],z=Object(n.useState)({}),R=Object(I.a)(z,2),W=R[0],P=R[1],H=Object(n.useState)(0),M=Object(I.a)(H,2),G=M[0],J=M[1],Y=function(e,t,s,n){console.log(e,t),P({user_id:e,username:t,profile_url:s,city_name:n}),console.log(y),console.log(A),console.log(k),console.log(W),y.includes(parseInt(e))?(console.log("setting 2"),J(2)):A.includes(parseInt(e))?(console.log("setting 1"),J(1)):k.includes(parseInt(e))&&(console.log("setting 3"),J(3)),U(!0),console.log(G)},$=function(){return F?Object(v.jsxs)("div",{children:[Object(v.jsx)(lt,{pic:W.profile_url,personKey:W.user_id,name:W.username,city:W.city_name,friendStat:G}),Object(v.jsx)(Qe.a,{"aria-label":"delete",onClick:function(){U(!1),J(0)},children:Object(v.jsx)(et.a,{fontSize:"small"})})]}):Object(v.jsx)(K,{entryDialogue:!0,sendResult:Y,type:"user"})},Q=function(){fetch("/api/users/".concat(e.user.user_id,"/friends"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log("am I authorised?"),console.log(e),console.log(e.Friends),l(e.Friends),w(e.Friends.map((function(e){return e.user_id}))),u(e.Incoming),C(e.Incoming.map((function(e){return e.user_id}))),m(e.Outgoing),B(e.Outgoing.map((function(e){return e.user_id})))}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{}),Object(v.jsxs)("div",{className:"page-wrapper",children:[Object(v.jsx)("div",{children:Object(v.jsx)(L,{})}),Object(v.jsx)("div",{className:"sureal-content-wrapper",children:Object(v.jsxs)(V.a,{style:{display:"flex",justifyContent:"flex-start",width:"95%"},children:[Object(v.jsxs)(V.a,{style:{width:"100%",marginLeft:"40px",marginTop:"20px",height:"fit-content"},children:[Object(v.jsx)(Z.a,{xs:6,style:{padding:"0",margin:"0",height:"fit-content"},children:Object(v.jsx)(jt,{})}),Object(v.jsxs)(Z.a,{xs:3,children:[" ",Object(v.jsxs)("div",{className:"friend-serach-group",children:[Object(v.jsx)("h6",{children:"Search for users"}),Object(v.jsx)($,{})]})]})]}),Object(v.jsxs)(V.a,{style:{marginTop:"20px",marginLeft:"20px",display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:[r.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Your Friends"}),Object(v.jsx)("div",{className:"horizontaliser",children:r.map((function(e){return Object(v.jsx)(Z.a,{style:{maxWidth:"20rem"},children:Object(v.jsx)(lt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:2})},e.user_id)}))})]}):Object(v.jsx)("div",{}),x.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Sent Requests"}),Object(v.jsx)("div",{className:"horizontaliser",children:x.map((function(e){return Object(v.jsx)(Z.a,{xs:3,children:Object(v.jsx)(lt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:1})},e.user_id)}))})]}):Object(v.jsx)("div",{}),h.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Pending Requests"}),Object(v.jsx)("div",{className:"horizonatliser",children:h.map((function(e){return Object(v.jsx)(Z.a,{style:{maxWidth:"20rem"},children:Object(v.jsx)(lt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:3})},e.user_id)}))})]}):Object(v.jsx)("div",{})]})]})})]})]})};function ht(e){return Object(v.jsx)(De.a,Object(h.a)({elevation:6,variant:"filled"},e))}var ut=Object(Ee.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),bt=Object(b.i)((function(){var e=ut(),t=Object(n.useState)(!1),s=Object(I.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(""),o=Object(I.a)(i,2),r=o[0],l=o[1],j=Object(n.useContext)(O),d=Object(b.f)(),h=Object(b.g)(),p=Object(n.useState)({}),x=Object(I.a)(p,2),m=x[0],g=x[1],f=Object(n.useState)({}),y=Object(I.a)(f,2),w=y[0],S=y[1],_=Object(n.useState)(0),k=Object(I.a)(_,2),C=k[0],T=k[1],L=Object(n.useState)(""),N=Object(I.a)(L,2),A=N[0],D=N[1],E=Object(n.useState)(!1),F=Object(I.a)(E,2),U=F[0],z=F[1];Object(n.useEffect)((function(){console.log(j.user),console.log(h),h.state.movie_id&&(g({movie_id:h.state.movie_id,movie_name:h.state.movie_name}),z(!0))}),[]);var R=function(e,t){console.log(e,t),g({movie_id:e,movie_name:t}),z(!0)},W=function(){return U?Object(v.jsxs)("div",{children:[m.movie_id,":",Object(v.jsx)(B.a,{variant:"contained",style:{marginLeft:"10px"},children:m.movie_name}),Object(v.jsx)(Qe.a,{"aria-label":"delete",onClick:function(){return z(!1)},children:Object(v.jsx)(et.a,{fontSize:"small"})})]}):Object(v.jsx)(K,{entryDialogue:!0,sendResult:R,type:"movie"})};return Object(v.jsxs)(Le.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Ie.a,{children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Admin Console"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(W,{})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Theatre ID",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return S(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Ticket Price",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return T(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,variant:"outlined",id:"datetime-local",label:"Scheduled date and time",type:"datetime-local",className:e.textField,InputLabelProps:{shrink:!0},onChange:function(e){return D(e.target.value)}})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(B.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){if(console.log(m,w,C,A),!U)return l("Please select a movie from the given dropdown"),void a(!0);if(""==A)return l("Please pick a date and time"),void a(!0);if(""==w)return l("Please pick a theatre"),void a(!0);if(""==C)return l("Please set a ticket price"),void a(!0);var e=A.split("T"),t=e[0]+" "+e[1]+":00";console.log(t),fetch("/api/shows/",{method:"POST",body:JSON.stringify({movie_id:m.movie_id,theatre_id:w,date_time:t,ticket_price:C}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),j.loginUser(),console.log(localStorage.getItem("lastLoc")),d.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Add Show"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Ie.a,{children:["Not here to add a show?"," ",Object(v.jsx)(u.b,{to:"/",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(Ne.a,{fontWeight:"fontWeightBold",children:"Take me home"})})]})})]})}),Object(v.jsx)(Be.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(ht,{severity:"error",children:r})})]})})),pt=function(){return Object(v.jsx)(u.a,{children:Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(X,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/movies/:id",render:function(e){return Object(v.jsx)(Te,Object(h.a)({},e),e.match.params.id)}}),Object(v.jsx)(b.a,{exact:!0,path:"/users/:id/lists",render:function(e){return Object(v.jsx)($e,Object(h.a)({},e),e.match.params.id)}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows/:id/seats",render:function(){return Object(v.jsx)(Me,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows/:id/book",render:function(){return Object(v.jsx)(Ke,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/movies/:id/shows",render:function(){return Object(v.jsx)(We,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows",render:function(){return Object(v.jsx)(bt,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/login",render:function(){return Object(v.jsx)(ze,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/signup",render:function(){return Object(v.jsx)(nt,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/friends",render:function(){return Object(v.jsx)(dt,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/profile",render:function(){return Object(v.jsx)(jt,{})}})]})})})};var Ot=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).logout=function(){localStorage.clear(),n.setState({user:{}})},n.login=function(){fetch("/api/is-logged-in",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){var t;e.logged_in?(n.setState({user:(t={profile_url:e.details.profile_url,user_role:e.details.user_role,user_id:e.details.user_id,username:e.details.username,city_id:e.details.city_id,city:e.details.city_name},Object(o.a)(t,"profile_url",e.details.profile_url),Object(o.a)(t,"email",e.details.email),t)}),console.log(n.state.user)):n.setState({user:{}});console.log(e)}))},n.state={user:{}},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.login()}},{key:"render",value:function(){var e={user:this.state.user,logoutUser:this.logout,loginUser:this.login};return Object(v.jsx)(O.Provider,{value:e,children:Object(v.jsx)(pt,{})})}}]),s}(n.Component),xt=(s(198),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,269)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),a(e),i(e)}))});i.a.render(Object(v.jsx)(Ot,{}),document.getElementById("root")),xt()}},[[199,1,2]]]);
//# sourceMappingURL=main.3e57befb.chunk.js.map