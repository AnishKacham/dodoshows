(this.webpackJsonpshade=this.webpackJsonpshade||[]).push([[0],{165:function(e,t,s){},181:function(e,t,s){},183:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(19),i=s.n(a),o=s(82),r=s(13),l=s(14),j=s(16),d=s(15),h=s(28),u=s(50),b=s(9),p=s(66),O=(s.p,s(94),c.a.createContext()),m=s(59),x=(s(131),s(165),s(270)),g=s(62),f=s.n(g),v=s(1),y=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){return Object(r.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(m.a,{className:"movie",tag:"a",onClick:function(){e.props.history.push("/movies/".concat(e.props.movie.movie_id))},border:"none",style:{width:"250px",minheight:"470px",border:"none",borderRadius:"15px",boxShadow:"5px 5px #DEE2E6"},children:[Object(v.jsx)(m.a.Img,{variant:"top",src:this.props.movie.poster_url,style:{height:"calc(250px * (40/27))"}}),Object(v.jsx)(m.a.ImgOverlay,{}),Object(v.jsxs)(m.a.Body,{children:[Object(v.jsx)(m.a.Title,{children:this.props.movie.movie_title}),Object(v.jsx)(m.a.Text,{children:w(this.props.movie.release_date)})]}),Object(v.jsx)(m.a.Footer,{children:Object(v.jsx)(x.a,{name:"read-only",value:.5*this.props.movie.avg_rating,max:5,precision:.1,size:"small",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})})]})}}]),s}(n.Component);function w(e){var t=e.split(" "),s=t[1],n="",c=t[2],a=t[3];return n="1"==s.charAt(1)?"st":"2"==s.charAt(1)?"nd":"3"==s.charAt(1)?"rd":"th","0"==s.charAt(0)&&(s=s.charAt(1)),s+n+" "+c+" "+a}var S=Object(b.i)(y),_=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),n=t.call(this,e),console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:this.props.movies.map((function(e){return Object(v.jsx)("div",{style:{margin:"20px 20px"},className:"p-2 bd-highlight col-example home-page-movie",children:Object(v.jsx)(S,{movie:e})},e.movie_id)}))})}}]),s}(n.Component),C=Object(b.i)(_),k=s(265),T=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={},e.goToListPage=function(){Object.keys(e.context.user).length?e.props.history.push("/users/".concat(e.context.user.user_id,"/lists")):(localStorage.setItem("lastLoc","/"),e.props.history.push("/login"))},e.goToFriendsPage=function(){Object.keys(e.context.user).length?e.props.history.push("/friends"):(localStorage.setItem("lastLoc","/"),e.props.history.push("/login"))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"side-bar-wrapper",style:{height:"500px",position:"sticky",top:"68px",width:"12vw"},children:Object(v.jsxs)(k.a,{className:"col-md-12 d-none d-md-block bg-dark sidebar",style:{minHeight:"100vh"},activeKey:"/home",children:[Object(v.jsx)("div",{className:"sidebar-sticky"}),Object(v.jsx)(k.a.Item,{children:Object(v.jsx)(k.a.Link,{onClick:this.goToListPage,children:"Lists"})}),Object(v.jsx)(k.a.Item,{children:Object(v.jsx)(k.a.Link,{disabled:!0,children:"About Us"})}),Object(v.jsx)(k.a.Item,{children:Object(v.jsx)(k.a.Link,{onClick:this.goToFriendsPage,eventKey:"link-1",children:"Profile and friends "})}),Object(v.jsx)(k.a.Item,{children:Object(v.jsx)(k.a.Link,{eventKey:"link-2",disabled:!0,children:"Donate"})}),Object(v.jsx)(k.a.Item,{children:Object(v.jsx)(k.a.Link,{eventKey:"link-3",disabled:!0,children:"Merchandise"})})]})})}}]),s}(n.Component);T.contextType=O;var N=Object(b.i)(T),L=s(11),D=s(262),A=s(238),I=s(269),F=s(145),B=s(268),U=s(239),E=s(260),z=s(141),R=s(140),P=s(258),W=s(236),H=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.props.clickedOutside(!0)},n.wrapperRef=c.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{ref:this.wrapperRef,className:this.props.dropdownClasses,children:this.props.results.slice(0,10).map((function(t){return Object(v.jsx)(W.a.Item,{onClick:function(){e.props.entryDialogue?"user"==e.props.type?e.props.onClickUser(t.id,t.name,t.pic,t.city):e.props.onClick(t.id,t.name):e.props.history.push("/movies/".concat(t.id))},children:t.name},t.id)}))})}}]),s}(n.Component),M=Object(b.i)(H),G=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={city:"",user:"",movie:{title:"",genres:[],people:[]},results:[],typingTimout:0,dropdownClasses:"dropdown-menu"},e.clickedOutside=function(t){t&&e.setState({dropdownClasses:"dropdown-menu"})},e.changeName=function(t){e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.props.type&&"city"==e.props.type?e.setState({city:t.target.value}):e.props.type&&"user"==e.props.type?e.setState({user:t.target.value}):e.setState({movie:{title:"".concat(t.target.value),genres:e.state.movie.genres,people:e.state.movie.people}}),t.target.value&&(e.state.typingTimeout=setTimeout(e.timedSearch,500))},e.timedSearch=function(){"city"==e.props.type?e.searchCities(e.state.city).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.city_id,name:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):"user"==e.props.type?e.searchUsers(e.state.user).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.user_id,name:e.username,pic:e.profile_url,city:e.city_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})})):e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.movie_id,name:e.movie_title}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})}))},e.searchMovie=function(e){return fetch("/api/search/movies",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchCities=function(e){return fetch("/api/search/cities",{method:"POST",body:JSON.stringify({city:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.searchUsers=function(e){return fetch("/api/search/users",{method:"POST",body:JSON.stringify({user:e}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.submitHandler=function(t){t.preventDefault(),e.props.entryDialogue||e.searchMovie(e.state.movie).then((function(e){return e.json()})).then((function(t){e.props.history.push({pathname:"/",state:{movies:t}})})).then((function(){window.location.reload(!1)}))},e.clickHandler=function(t,s){e.clickedOutside(!0),e.props.sendResult(t,s)},e.clickHandlerUser=function(t,s,n,c){e.clickedOutside(!0),e.props.sendResult(t,s,n,c)},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.props.entryDialogue?Object(v.jsxs)(E.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",autoComplete:"off",children:[Object(v.jsx)(P.a,{fullWidth:!0,label:this.props.type?this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1):"Search for a movie...",name:"username",size:"small",variant:"outlined",onChange:this.changeName}),Object(v.jsx)(M,{type:this.props.type,onClick:this.clickHandler,onClickUser:this.clickHandlerUser,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]}):Object(v.jsxs)(E.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(v.jsx)(z.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:this.changeName}),Object(v.jsx)(R.a,{variant:"outline-success",type:"submit",children:"Search"}),Object(v.jsx)(M,{onClick:this.clickHandler,entryDialogue:this.props.entryDialogue,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]})})}}]),s}(n.Component),J=Object(b.i)(G),K=function(){var e=Object(n.useContext)(O),t=Object(b.f)(),s=Object(b.g)(),a=c.a.useState(!1),i=Object(L.a)(a,2),o=i[0],r=i[1],l=c.a.useRef(null);return console.log(e),Object.keys(e.user).length?Object(v.jsxs)("div",{style:{border:"grey",borderWidth:"1px",borderRadius:"30px",borderStyle:"solid",padding:"5px",textAlign:"center"},onClick:function(){r((function(e){return!e}))},children:[e.user.profile_url?Object(v.jsx)(I.a,{src:e.user.profile_url,ref:l}):Object(v.jsx)(I.a,{ref:l,children:e.user.username.charAt(0).toUpperCase()}),Object(v.jsx)(F.a,{open:o,anchorEl:l.current,role:void 0,disablePortal:!0,transition:!0,children:Object(v.jsx)(B.a,{id:"menu-list-grow",children:Object(v.jsx)(U.a,{onClick:function(){return e.logoutUser()},children:"Logout"})})})]}):Object(v.jsx)("div",{children:Object(v.jsx)(A.a,{onClick:function(){localStorage.setItem("lastLoc",s.pathname),t.push("/login")},children:Object(v.jsx)("div",{style:{color:"white"},children:"Log in"})})})},Y=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(D.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:[Object(v.jsx)(D.a.Brand,{children:"Dodo Shows"}),Object(v.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(v.jsxs)(k.a,{className:"mr-auto",children:[Object(v.jsx)(k.a.Link,{onClick:function(){e.props.history.push("/")},children:"Home"}),Object(v.jsx)(J,{entryDialogue:!1}),Object(v.jsx)(k.a.Link,{onClick:function(){return e.props.history.push("/advancedSearch")},children:"Advanced search"})]}),Object(v.jsx)(K,{})]})]})}}]),s}(n.Component),q=Object(b.i)(Y),V=s(240),Z=s(142),$=s(241),Q=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movies:[]},n.fetchMovies=function(){fetch("/api/movies/",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({movies:e}),console.log(n.state.movies)}))},console.log(Object(p.a)(n)),e.location.state?(n.state={movies:e.location.state.movies},console.log(n.state)):n.fetchMovies(),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(q,{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(N,{})}),Object(v.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(v.jsx)($.a,{children:Object(v.jsx)(C,{movies:this.state.movies})})})]})]})}}]),s}(n.Component);Q.contextType=O;var X=Object(b.i)(Q),ee=s(245),te=s(143),se=s(246),ne=s(46),ce=s(247),ae=s(77),ie=s(78),oe=(s(181),s(146)),re=s(257),le=function(e){var t=Object(b.f)(),s=Object(n.useState)(""),c=Object(L.a)(s,2),a=(c[0],c[1],Object(n.useState)("")),i=Object(L.a)(a,2),o=(i[0],i[1],Object(n.useState)([])),r=Object(L.a)(o,2),l=r[0],j=r[1];var d=function(){j([]),e.closeDialogue()};return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsxs)(re.a.Title,{children:['Add Entry to list "',e.list.list_name,'"']})}),Object(v.jsxs)(re.a.Body,{children:[Object(v.jsx)(J,{entryDialogue:!0,sendResult:function(e,t){console.log(e),console.log(t),function(e,t){var s;for(s=0;s<t.length;s++)if(t[s].movie_id===e)return!0;return!1}(e,l)||j((function(s){return[].concat(Object(oe.a)(s),[{movie_id:e,movie_title:t}])}))}}),l.map((function(e){return Object(v.jsx)(R.a,{style:{margin:"10px"},onClick:function(){return t=e,void j(l.filter((function(e){return e!=t})));var t},children:e.movie_title},e.movie_id)}))]}),Object(v.jsxs)(re.a.Footer,{children:[Object(v.jsx)(R.a,{variant:"secondary",onClick:d,children:"Close"}),Object(v.jsx)(R.a,{variant:"primary",onClick:function(s){if(s.preventDefault(),console.log(localStorage.getItem("jwt")),l.length){var n=l.map((function(e){return e.movie_id}));console.log(n),fetch("/api/lists/".concat(e.list.list_id),{method:"POST",body:JSON.stringify({movie_ids:n}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){d(),e.reloadPage()}))}},children:"Add movies"})]})]})},je=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={},n.clicked=function(e){console.log("clicked"),n.props.history.push("/movies/".concat(e))},console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsx)("tbody",{children:this.props.items.map((function(t,s){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:s+1}),Object(v.jsx)("td",{onClick:function(){return e.clicked(t.movie_id)},children:t.movie_title}),Object(v.jsx)("td",{children:t.score?t.score/2:"--"}),Object(v.jsx)("td",{children:t.watch_status?"Watched":"Plan to watch"})]},t.movie_id.toString())}))})}}]),s}(n.Component),de=Object(b.i)(je),he=s(244),ue=s(242),be=s(263),pe=function(e){var t=Object(b.f)(),s=Object(n.useState)(""),c=Object(L.a)(s,2),a=c[0],i=c[1],o=Object(n.useState)(!1),r=Object(L.a)(o,2),l=r[0],j=r[1],d=Object(n.useContext)(O);return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsx)(re.a.Title,{children:"Add List"})}),Object(v.jsx)(re.a.Body,{children:Object(v.jsxs)(E.a,{onSubmit:function(s){s.preventDefault(),console.log(a),console.log(l),console.log(localStorage.getItem("jwt")),fetch("/api/lists/",{method:"POST",body:JSON.stringify({list_name:a,is_private:l}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),200!=e.status&&(console.log(d),localStorage.setItem("lastLoc","".concat(t.location.pathname)),t.push("/login"))})).then((function(){e.reloadPage()}))},children:[Object(v.jsxs)(E.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(E.a.Label,{children:"Username"}),Object(v.jsx)(E.a.Control,{type:"text",placeholder:"Enter List Name",onChange:function(e){return i(e.target.value)}})]}),Object(v.jsx)(E.a.Group,{controlId:"formBasicCheckbox",children:Object(v.jsx)(E.a.Check,{type:"checkbox",label:"Make this private",defaultChecked:l,onChange:function(e){return j(e.target.checked)}})}),Object(v.jsx)(R.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(v.jsxs)(re.a.Footer,{children:[Object(v.jsx)(R.a,{variant:"secondary",onClick:e.closeDialogue,children:"Close"}),Object(v.jsx)(R.a,{variant:"primary",children:"Save Changes"})]})]})},Oe=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={show:!1},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(R.a,{style:{marginTop:"20px"},onClick:this.props.onClick,children:"Add list"})}}]),s}(n.Component),me=Object(b.i)(Oe),xe=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e,n){var c;return Object(r.a)(this,s),(c=t.call(this,e,n)).state={entries:[],ratings:[],showWatched:!0,showUnwatched:!0,searchString:"",sortMode:1,sort:0},c.fetchEntries=function(){return fetch("/api/users/".concat(c.props.match.params.id,"/entries"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.fetchRatings=function(){return fetch("/api/users/".concat(c.props.match.params.id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})},c.toggleWatched=function(){console.log("watched"),c.state.showWatched?c.setState({showWatched:!1}):c.setState({showWatched:!0})},c.toggleUnwatched=function(){console.log("unwatched"),c.state.showUnwatched?c.setState({showUnwatched:!1}):c.setState({showUnwatched:!0})},c.toggleSort=function(e){c.state.sortMode==e?-1==c.state.sort?c.setState({sort:1}):c.setState({sort:-1}):c.setState({sortMode:e})},console.log(c.props),c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.fetchEntries().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({entries:t})})),this.fetchRatings().then((function(t){return console.log(t),200!=t.status&&(console.log(e.context.user),localStorage.setItem("lastLoc","".concat(e.props.location.pathname)),e.props.history.push("/login")),t.json()})).then((function(t){console.log(t),e._isMounted&&e.setState({ratings:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{children:Object(v.jsx)(ue.a,{control:Object(v.jsx)(be.a,{checked:this.state.showWatched,onChange:this.toggleWatched,name:"watched"}),label:"Watched"})}),Object(v.jsx)(Z.a,{children:Object(v.jsx)(ue.a,{control:Object(v.jsx)(be.a,{checked:this.state.showUnwatched,onChange:this.toggleUnwatched,name:"unwatched"}),label:"Plan to watch"})})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsxs)(Z.a,{xs:10,children:[Object(v.jsxs)(he.a,{striped:!0,bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:Object(v.jsxs)(E.a.Group,{as:V.a,controlId:"formHorizontalEmail",children:[Object(v.jsx)(E.a.Label,{column:!0,sm:2,children:"Movie"}),Object(v.jsx)(Z.a,{sm:10,children:Object(v.jsx)(z.a,{value:this.state.searchString,type:"text",placeholder:"Search...",onChange:function(t){return e.setState({searchString:t.target.value})}})})]})}),Object(v.jsxs)("th",{children:["Score",Object(v.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(1)}})]}),Object(v.jsxs)("th",{children:["Watch Status",Object(v.jsx)(ae.a,{style:{marginLeft:"5px"},icon:ie.b,onClick:function(){return e.toggleSort(2)}})]})]})}),Object(v.jsx)(de,{items:this.props.selected_all?this.state.ratings.filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0})):this.state.entries.filter((function(t){return t.list_id==e.props.selected_list.list_id})).filter((function(t){return!(!e.state.showWatched||1!=t.watch_status)||!(!e.state.showUnwatched||0!=t.watch_status)})).filter((function(t){return t.movie_title.toLowerCase().search(e.state.searchString.toLowerCase())>=0})).sort((function(t,s){return 1==e.state.sortMode?(t.score-s.score)*e.state.sort:2==e.state.sortMode?(t.watch_status-s.watch_status)*e.state.sort:void 0}))},this.state.sort)]}),this.props.isOwner?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R.a,{style:{display:this.props.selected_all?"none":"block"},onClick:function(){return e.props.showEntryDialogue(e.props.selected_list)},children:"+ Add movie to this list"}),Object(v.jsx)(R.a,{style:{display:this.props.selected_all?"block":"none"},onClick:function(){return e.props.showRatingDialogue()},children:"+ Add movie"})]}):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsx)(Z.a,{children:Object(v.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(v.jsx)(R.a,{className:this.props.selected_all?"btn-success":null,style:{marginBottom:"20px"},onClick:function(){return e.props.setSelectedAll(!0)},children:"All"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),this.props.lists.map((function(t){return Object(v.jsxs)(R.a,{className:t.list_id!=e.props.selected_list.list_id||e.props.selected_all?"btn-primary":"btn-success",style:{marginBottom:"3px"},onClick:function(){e.props.setSelectedAll(!1),e.props.changeSelected(t)},children:[t.is_private?Object(v.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(v.jsx)(v.Fragment,{}),t.list_name]},t.list_id)})),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),this.props.isOwner?Object(v.jsx)(me,{onClick:this.props.showListDialogue}):Object(v.jsx)(v.Fragment,{})]})})]})]})}}]),s}(n.Component);xe.contextType=O;var ge=Object(b.i)(xe),fe=function(e){var t=Object(n.useState)({movie_id:e.movie_id,watch_status:0,score:0,review:""}),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useContext)(O),o=Object(n.useState)({user_id:0,movie_id:0,watch_status:0,score:0,review:""}),r=Object(L.a)(o,2),l=r[0],j=r[1],d=Object(n.useState)(!1),u=Object(L.a)(d,2),p=u[0],g=u[1],y=Object(n.useState)([]),w=Object(L.a)(y,2),S=w[0],_=w[1],C=Object(n.useState)(!1),k=Object(L.a)(C,2),T=k[0],N=k[1],D=Object(b.f)();Object(n.useEffect)((function(){console.log(i.user),console.log(e),A(),e.showLists&&I()}),[i]);var A=function(){console.log(i.user),console.log(e),Object.keys(i.user).length&&fetch("/api/users/".concat(i.user.user_id,"/").concat(e.movie_id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(g(!0),j(e),N(!1),a((function(t){return Object(h.a)(Object(h.a)({},t),{},{watch_status:e.watch_status,score:e.score,review:e.review})})))}))},I=function(){console.log(i.user),console.log(e),Object.keys(i.user).length&&fetch("/api/users/".concat(i.user.user_id,"/movies/").concat(e.movie_id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&_(e)}))};if(console.log(Object.keys(l).length),Object.keys(i.user).length&&l){if(T)return Object(v.jsxs)(m.a,{border:c.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(v.jsx)(m.a.Header,{children:Object(v.jsx)(se.a,{variant:c.watch_status?"success":"secondary",title:c.watch_status?"Watched":"Plan to watch",children:Object(v.jsx)(ne.a.Item,{eventKey:"1",onClick:function(){return c.watch_status?a((function(e){return Object(h.a)(Object(h.a)({},e),{},{watch_status:0})})):a((function(e){return Object(h.a)(Object(h.a)({},e),{},{watch_status:1})}))},children:c.watch_status?"Plan to watch":"Watched"})})}),Object(v.jsxs)(ee.a,{className:"list-group-flush",children:[Object(v.jsx)(te.a,{children:Object(v.jsxs)(m.a.Text,{children:["Your score:",Object(v.jsx)("br",{}),Object(v.jsx)(x.a,{name:"customized-empty",className:"user-rating",value:.5*c.score,max:5,precision:.5,size:"small",emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"}),onChange:function(e,t){a((function(e){return Object(h.a)(Object(h.a)({},e),{},{score:2*t})}))}})]})}),Object(v.jsxs)(te.a,{children:[Object(v.jsx)(m.a.Title,{children:"Your review:"}),Object(v.jsx)(m.a.Text,{children:Object(v.jsx)(E.a.Control,{as:"textarea",rows:3,defaultValue:c.review,onChange:function(e){a((function(t){return Object(h.a)(Object(h.a)({},t),{},{review:e.target.value})}))}})})]})]}),Object(v.jsxs)(m.a.Footer,{children:[Object(v.jsx)(R.a,{variant:"secondary",size:"sm",onClick:function(){return N(!1)},children:"Cancel"}),Object(v.jsx)(R.a,{variant:"success",className:"float-right",size:"sm",onClick:function(){console.log(c),fetch("/api/users/".concat(i.user.user_id),{method:p?"PUT":"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){200!=e.status&&(localStorage.setItem("lastLoc","".concat(D.location.pathname)),D.push("/login"))})).then((function(){A(),N(!1)}))},children:p?"Save":"Add"})]})]});if(p&&Object.keys(l).length)return Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{children:Object(v.jsxs)(m.a,{border:l.watch_status?"success":"secondary",style:{width:"18rem"},children:[Object(v.jsx)(m.a.Header,{children:l.watch_status?"Watched":"Plan to watch"}),Object(v.jsxs)(ee.a,{className:"list-group-flush",children:[Object(v.jsx)(te.a,{children:Object(v.jsxs)(m.a.Text,{children:["Your score:",Object(v.jsx)("br",{}),Object(v.jsx)(x.a,{name:"read-only",value:.5*l.score,max:5,precision:.5,size:"small",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})]})}),Object(v.jsxs)(te.a,{children:[Object(v.jsx)(m.a.Title,{children:"Your review:"}),Object(v.jsx)(m.a.Text,{children:l.review})]})]}),Object(v.jsx)(m.a.Footer,{children:Object(v.jsx)(R.a,{size:"sm",onClick:function(){return N(!0)},children:"Edit"})})]})}),e.showLists?Object(v.jsx)(ve,{lists:S}):Object(v.jsx)(v.Fragment,{})]});if(!p)return Object(v.jsx)(R.a,{onClick:function(){return N(!0)},children:"Rate this movie"})}return Object(v.jsx)(v.Fragment,{})},ve=function(e){var t=Object(n.useContext)(O),s=Object(b.f)();return Object(v.jsx)(Z.a,{children:Object(v.jsxs)("div",{className:"btn-group-justified btn-group-vertical",children:[Object(v.jsx)("div",{style:{marginBottom:"10px"},children:"Present in lists:"}),e.lists.length?e.lists.map((function(e){return Object(v.jsxs)(R.a,{size:"sm",style:{marginBottom:"10px"},onClick:function(){return s.push({pathname:"/users/".concat(t.user.user_id,"/lists"),state:{selected_list:e}})},children:[" ",e.is_private?Object(v.jsx)(ae.a,{style:{marginRight:"5px"},icon:ie.a}):Object(v.jsx)(v.Fragment,{}),e.list_name]},e.list_id)})):Object(v.jsx)(R.a,{size:"sm",variant:"secondary",style:{marginBottom:"10px"},disabled:!0,children:"Not in any :("})]})})},ye=function(e){var t=Object(n.useState)([]),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)([]),o=Object(L.a)(i,2),r=o[0],l=o[1],j=Object(n.useState)(!1),d=Object(L.a)(j,2),h=d[0],u=d[1];Object(n.useEffect)((function(){console.log(e),b()}),[]);var b=function(){console.log(e),fetch("/api/movies/".concat(e.movie_id,"/ratings"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&Object.keys(e).length&&!e.msg&&(a(e.ratings),l(e.friends.map((function(e){return e.user_id2}))))}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(se.a,{style:{marginBottom:"50px"},variant:h?"success":"secondary",title:h?"Reviews from friends":"Reviews from everyone",children:Object(v.jsx)(ne.a.Item,{eventKey:"1",onClick:function(){return u(!h)},children:h?"Reviews from everyone":"Reviews from friends"})}),c.length?c.filter((function(e){return!h||r.includes(e.user_id)})).map((function(e){return Object(v.jsxs)(m.a,{style:{marginBottom:"50px"},children:[Object(v.jsx)(m.a.Header,{children:e.username}),Object(v.jsx)(m.a.Body,{children:Object(v.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(v.jsxs)("p",{children:[' "',e.review,'" ']}),Object(v.jsx)(m.a.Subtitle,{children:Object(v.jsx)(x.a,{name:"read-only",value:.5*e.score,max:5,precision:.5,size:"small",emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"}),readOnly:!0})})]})})]},e.user_id)})):Object(v.jsx)(m.a,{style:{marginBottom:"50px"},children:Object(v.jsx)(m.a.Body,{children:"No reviews :("})})]})},we=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e,n){var c;return Object(r.a)(this,s),(c=t.call(this,e,n)).state={movie_id:c.props.movie_id,movie:[],genres:[],people:[],AdminFlag:0},c.AddShowsToggle=function(e,t){if("ADM"===c.context.user.user_role)return Object(v.jsx)(R.a,{variant:"warning",style:{marginBottom:"30px"},onClick:function(){c.props.history.push({pathname:"/shows/",state:{movie_id:e,movie_name:t}}),console.log("In AddShowsToggle",c.state.movie.movie_id,c.state.movie.movie_title)},block:!0,children:"Add Show [FOR ADMINS ONLY]"})},c.fetchMovie(c.state.movie_id),console.log(c.props),console.log(n),c}return Object(l.a)(s,[{key:"fetchMovie",value:function(e){var t=this;fetch("/api/movies/".concat(e),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({movie:e}),t.setState({people:e.people}),t.setState({genres:e.genres}),console.log(t.state.people),console.log(t.state.genres)}))}},{key:"render",value:function(){var e=this;return console.log("hi2"),Object(v.jsxs)($.a,{children:[Object(v.jsxs)(V.a,{children:[Object(v.jsxs)(Z.a,{children:[Object(v.jsx)(ce.a,{src:this.state.movie.poster_url,style:{width:"350px",height:"calc(350px * (40/27))"},thumbnail:!0}),Object(v.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:Object(v.jsx)(x.a,{name:"read-only",value:.5*this.state.movie.avg_rating,max:5,precision:.1,size:"large",readOnly:!0,emptyIcon:Object(v.jsx)(f.a,{fontSize:"inherit"})})})]}),Object(v.jsxs)(Z.a,{children:[Object(v.jsx)("h1",{className:"display-4",children:this.state.movie.movie_title}),this.state.genres.map((function(e){return Object(v.jsx)("div",{children:Se(e.genre_name)},e.genre_id)})),this.state.movie.movie_description,Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{variant:"danger",style:{marginBottom:"30px"},onClick:function(){e.props.history.push({pathname:"/movies/".concat(e.state.movie.movie_id,"/shows"),state:{movie_id:e.state.movie.movie_id}}),console.log(e.state.movie.movie_id)},block:!0,children:"Book"}),this.AddShowsToggle(this.state.movie.movie_id,this.state.movie.movie_title),Object(v.jsx)(fe,{movie_id:this.props.movie_id,showLists:!0},this.props.movie_id)]})]}),Object(v.jsx)("div",{className:"d-flex align-content-stretch flex-wrap bd-highlight example-parent person",children:this.state.people.map((function(e){return Object(v.jsx)("div",{className:"p-2 bd-highlight col-example",children:Object(v.jsxs)(m.a,{border:"secondary",style:{width:"160px",height:"300px"},children:[Object(v.jsx)(m.a.Header,{children:"NULL"==e.person_role?"Crew":"Cast"}),Object(v.jsx)(m.a.Img,{variant:"top",src:e.profile_url,className:"img-fluid",style:{width:"auto",height:"150px",objectFit:"cover"}}),Object(v.jsxs)(m.a.Body,{children:[Object(v.jsx)(m.a.Title,{children:e.person_name}),Object(v.jsx)(m.a.Text,{children:"NULL"==e.person_role?Se(e.cast_or_crew):"As "+_e(e.person_role)})]})]})},e.person_id)}))}),Object(v.jsx)(ye,{movie_id:this.state.movie_id})]})}}]),s}(n.Component);function Se(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _e(e){var t,s=e.split('"'),n="";for(t=1;t<s.length-1;t+=1)n+=s[t],t%2==0&&(n+=" ");return n}we.contextType=O;var Ce=Object(b.i)(we),ke=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.match.params.id},console.log(e),n}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)($.a,{fluid:!0,children:[Object(v.jsx)(q,{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(N,{})}),Object(v.jsx)(Z.a,{xs:10,children:Object(v.jsx)(Ce,{movie_id:this.state.movie_id})})]})]})})}}]),s}(n.Component),Te=Object(b.i)(ke),Ne=s(249),Le=s(92),De=s(259),Ae=s(250),Ie=s(264),Fe=s(261),Be=s(248);function Ue(e){return Object(v.jsx)(Fe.a,Object(h.a)({elevation:6,variant:"filled"},e))}var Ee,ze=Object(Be.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),Re=Object(b.i)((function(){var e=ze(),t=Object(n.useState)(!1),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useContext)(O),o=Object(b.f)(),r=Object(n.useState)(""),l=Object(L.a)(r,2),j=l[0],d=l[1],h=Object(n.useState)(""),p=Object(L.a)(h,2),m=p[0],x=p[1];return Object(v.jsxs)(Ne.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Le.a,{children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Login"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return d(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return x(e.target.value)}})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(A.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){fetch("/api/login",{method:"POST",body:JSON.stringify({username:j,password:m}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),i.loginUser(),console.log(localStorage.getItem("lastLoc")),o.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Login"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Le.a,{children:["Don't have an account?"," ",Object(v.jsx)(u.b,{to:"/signup",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Sign up"})})]})})]})}),Object(v.jsx)(Ie.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(Ue,{severity:"error",children:"Your form details are not valid!"})})]})})),Pe=(s(182),function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={movie_id:n.props.location.state.movie_id,shows:[]},n.fetchShows(n.state.movie_id),n}return Object(l.a)(s,[{key:"fetchShows",value:function(e){var t=this;fetch("/api/movies/".concat(e,"/shows"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){t.setState({shows:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.shows.length?Object(v.jsx)("div",{className:"ShowList",children:this.state.shows.map((function(t){return Object(v.jsx)("div",{className:"d-flex flex-column bd-highlight mb-3",children:Object(v.jsxs)(m.a,{bg:"dark",text:"light",children:[Object(v.jsx)(m.a.Header,{as:"h5",children:"Featured"}),Object(v.jsxs)(m.a.Body,{children:[Object(v.jsx)(m.a.Title,{children:t.theatre_mall}),Object(v.jsx)(m.a.Text,{children:t.date_time}),Object(v.jsx)(R.a,{variant:"success",onClick:function(){e.props.history.push({pathname:"/shows/".concat(t.show_id,"/seats"),state:{show_id:t.show_id}}),console.log(t.show_id)},children:"Book Show"})]})]})},t.show_id)}))}):Object(v.jsxs)("div",{className:"NoShows",style:{position:"absolute",top:"30%",marginLeft:"20%",marginRight:"20%",height:"40%",fontSize:"50px"},children:["Sorry ! There are no shows for this movie currently! You may return to the home page:",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{variant:"warning",size:"lg",block:!0,style:{fontSize:"30px"},onClick:function(){e.props.history.push("/")},children:"Back to Home"})]})}}]),s}(n.Component)),We=Object(b.i)(Pe),He=(s(183),[]),Me=[];for(Ee=1;Ee<31;Ee++)Me.push(Ee);var Ge=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).SeatSelect=function(e){1==document.getElementById(e).classList.toggle("select")?He.push(e):n.RemoveSeat(He,e)},n.SeatCheck=function(e,t){return 0==t?Object(v.jsx)("button",{className:"seat-btn",style:{backgroundColor:"red",borderRadius:"13px",padding:"0px",width:"35px"},id:e,children:Object(v.jsx)("div",{style:{fontSize:"12px",textAlign:"centre"},children:e})}):Object(v.jsx)("button",{className:"seat-btn",style:{borderRadius:"13px",padding:"0px",width:"35px"},id:e,onClick:function(){return n.SeatSelect(e)},children:Object(v.jsx)("div",{style:{fontSize:"12px",textAlign:"centre"},children:e})})},n.SortSeats=function(e){var t,s;for(t=0;t<e.length;t++)for(s=0;s<e.length-1;s++){var n=parseInt(e[s].seat_code.slice(1)),c=parseInt(e[s+1].seat_code.slice(1)),a=e[s].seat_code.charAt(0),i=e[s+1].seat_code.charAt(0);if(0==a.localeCompare(i)&&n>c){var o=e[s];e[s]=e[s+1],e[s+1]=o}}return e},n.state={show_id:n.props.location.state.show_id,seats:[],code_letters:[],code_numbers:[]},n.fetchSeats(n.state.show_id),n}return Object(l.a)(s,[{key:"RemoveSeat",value:function(e,t){var s=e.indexOf(t);return s>-1&&e.splice(s,1),e}},{key:"fetchSeats",value:function(e){var t=this;fetch("/api/shows/".concat(e,"/seats"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){var s;e=t.SortSeats(e),t.setState({seats:e});var n=new Set,c=new Set;for(s=0;s<e.length;s++)n.add(e[s].seat_code.charAt(0)),c.add(e[s].seat_code.slice(1));t.setState({code_letters:Array.from(n),code_numbers:Array.from(c)}),console.log("code_letters:",t.state.code_letters)}))}},{key:"render",value:function(){var e=this;return this.state.seats.length&&this.state.code_letters.length&&this.state.code_numbers.length?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"page-container",children:[Object(v.jsx)("div",{children:Object(v.jsx)("p",{className:"seattitle",children:"SELECT YOUR SEATS"})}),Object(v.jsx)("div",{className:"btns-container",children:this.state.code_letters.map((function(t,s){return Object(v.jsx)(V.a,{style:{flexWrap:"nowrap",width:"900px",justifyContent:"space-around"},children:e.state.code_numbers.map((function(n){return Object(v.jsxs)(Z.a,{style:{paddingRight:"0px",paddingLeft:"10px"},children:[Object(v.jsx)("br",{}),console.log("Check: ",e.state),e.SeatCheck(t+n,e.state.seats[s*e.state.code_numbers.length+parseInt(n)-1].seat_status)]},n)}))})}))}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"screen",children:"SCREEN HERE"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{variant:"success",style:{width:"50%",height:"100px",marginRight:"25%",marginLeft:"25%",fontSize:"30px",borderRadius:"100px"},onClick:function(){e.props.history.push({pathname:"/shows/".concat(e.state.show_id,"/book"),state:{SeatsBooked:He,show_id:e.state.show_id}})},children:"Proceed to pay"})]})]})}):Object(v.jsx)(v.Fragment,{})}}]),s}(n.Component),Je=Object(b.i)(Ge);s(144);s(196);var Ke=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={BSeats:n.props.location.state.SeatsBooked,show_id:n.props.location.state.show_id},console.log(n.state.BSeats),n}return Object(l.a)(s,[{key:"Book",value:function(e,t){var s=this;fetch("/api/shows/".concat(t,"/book"),{method:"POST",body:JSON.stringify({seats:e,paymentDeets:"hi"}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){s.setState({seats:e}),console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"GPay",children:[Object(v.jsx)("p",{className:"Thanks",children:"Thank you! Please complete your booking by paying below. Make sure to receive your ticket! Enjoy"}),Object(v.jsx)(R.a,{variant:"info",size:"lg",block:!0,children:"Payment Gateway"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{variant:"success",size:"lg",onClick:function(){return e.Book(e.state.BSeats,e.state.show_id)},block:!0,style:{boxShadow:"3px 4px"},children:"Send ticket"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{variant:"warning",size:"lg",block:!0,onClick:function(){e.props.history.push("/")},children:"Back to Home"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]})}}]),s}(n.Component),Ye=Object(b.i)(Ke),qe=s(202),Ve=s(251),Ze=function(e){var t=Object(n.useState)({}),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(!1),o=Object(L.a)(i,2),r=o[0],l=o[1],j=function(e,t){console.log(e),console.log(t),a({movie_id:e,movie_title:t}),l(!0)},d=function(){return r?Object(v.jsx)("div",{children:Object(v.jsx)(R.a,{onClick:function(){return l(!1)},style:{marginBottom:"10px"},children:c.movie_title})}):Object(v.jsx)(J,{entryDialogue:!0,sendResult:j})};return Object(v.jsxs)(re.a,{show:e.show,children:[Object(v.jsx)(re.a.Header,{closeButton:!0,children:Object(v.jsx)(re.a.Title,{children:"Add a movie"})}),Object(v.jsxs)(re.a.Body,{children:[Object(v.jsx)(d,{}),r?Object(v.jsx)(fe,{movie_id:c.movie_id,showList:!1},c.movie_id):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsx)(re.a.Footer,{children:Object(v.jsx)(R.a,{variant:"secondary",onClick:function(){a({}),l(!1),e.closeDialogue()},children:"Close"})})]})},$e=function(){var e=Object(n.useContext)(O),t=Object(n.useState)({username:"",profile_url:""}),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(b.h)();Object(n.useEffect)((function(){console.log(e.user),console.log(i),i.id!=e.user.user_id?o():a(e.user)}),[e]);var o=function(){fetch("/api/users/".concat(i.id),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){a(e)}))};return void 0!=c.username?Object(v.jsxs)(v.Fragment,{children:[c.profile_url?Object(v.jsx)(I.a,{src:c.profile_url,style:{marginLeft:"20px"}}):Object(v.jsx)(I.a,{style:{marginLeft:"15px"},children:c.username.charAt(0).toUpperCase()}),Object(v.jsx)(qe.a,{children:Object(v.jsx)(Ve.a,{primary:"".concat(c.username,"'s lists")})})]}):Object(v.jsx)(v.Fragment,{})},Qe=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={showList:!1,showEntry:!1,showRating:!1,lists:[{list_id:0,list_name:"",is_private:0}],selected_list:{},refreshEntries:!0,selected_all:!0},n.showListDialogue=function(){n.setState({showList:!0})},n.closeListDialogue=function(){n.setState({showList:!1})},n.showEntryDialogue=function(e){console.log(e),n.setState({selected_list:e,showEntry:!0})},n.closeEntryDialogue=function(){n.setState({showEntry:!1})},n.showRatingDialogue=function(){n.setState({showRating:!0})},n.closeRatingDialogue=function(){n.setState({showRating:!1})},n.reloadEntries=function(){n.state.refreshEntries?n.setState({refreshEntries:!1,selected_all:!1}):n.setState({refreshEntries:!0,selected_all:!1})},n.reloadLists=function(){n.fetchLists()},n.componentDidMount=function(){n.fetchLists()},n.fetchLists=function(){fetch("/api/users/".concat(n.props.match.params.id,"/lists"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return console.log(e),200!=e.status&&(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")),e.json()})).then((function(e){console.log(e),void 0!=e.msg?(localStorage.setItem("lastLoc","".concat(n.props.location.pathname)),n.props.history.push("/login")):0===Object.keys(n.state.selected_list).length&&e.length?(console.log(Object.keys(n.state.selected_list).length),console.log("1"),console.log(e),n.setState({lists:e,selected_list:e[0]})):(console.log(Object.keys(n.state.selected_list).length),n.setState({lists:e}))})).then((function(){n.props.location.state&&n.setState({selected_list:n.props.location.state.selected_list,selected_all:!1})}))},console.log(e.location),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.state),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)($.a,{fluid:!0,children:[Object(v.jsx)(q,{}),Object(v.jsx)("br",{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(N,{})}),Object(v.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(v.jsxs)($.a,{children:[Object(v.jsx)($e,{}),Object(v.jsx)(ge,{isOwner:this.context.user.user_id==this.props.match.params.id,lists:this.state.lists,selected_list:this.state.selected_list,changeSelected:function(t){e.setState({selected_list:t})},setSelectedAll:function(t){return e.setState({selected_all:t})},selected_all:this.state.selected_all,showListDialogue:this.showListDialogue,showEntryDialogue:this.showEntryDialogue,showRatingDialogue:this.showRatingDialogue},this.state.lists.toString()+" "+this.state.refreshEntries.toString()+" "+this.state.selected_list.toString()+" "+this.state.selected_all.toString())]})})]}),Object(v.jsx)(pe,{selected_list:this.state.selected_list,show:this.state.showList,closeDialogue:this.closeListDialogue,reloadPage:this.reloadLists}),Object(v.jsx)(le,{list:this.state.selected_list,show:this.state.showEntry,closeDialogue:this.closeEntryDialogue,reloadPage:this.reloadEntries}),Object(v.jsx)(Ze,{show:this.state.showRating,closeDialogue:this.closeRatingDialogue,reloadPage:this.reloadEntries})]})})}}]),s}(n.Component);Qe.contextType=O;var Xe=Object(b.i)(Qe),et=s(243),tt=s(73),st=s.n(tt);function nt(e){return Object(v.jsx)(Fe.a,Object(h.a)({elevation:6,variant:"filled"},e))}var ct=Object(Be.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),at=Object(b.i)((function(){var e=ct(),t=Object(n.useState)(!1),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(""),o=Object(L.a)(i,2),r=o[0],l=o[1],j=Object(n.useContext)(O),d=Object(b.f)(),h=Object(n.useState)(""),p=Object(L.a)(h,2),m=p[0],x=p[1],g=Object(n.useState)(""),f=Object(L.a)(g,2),y=f[0],w=f[1],S=Object(n.useState)(""),_=Object(L.a)(S,2),C=_[0],k=_[1],T=Object(n.useState)(0),N=Object(L.a)(T,2),D=N[0],I=N[1],F=Object(n.useState)(""),B=Object(L.a)(F,2),U=B[0],E=B[1],z=Object(n.useState)(!1),R=Object(L.a)(z,2),W=R[0],H=R[1],M=function(e,t){console.log(e,t),I(e),E(t),H(!0)},G=function(){return W?Object(v.jsxs)("div",{children:[Object(v.jsx)(A.a,{variant:"contained",children:U}),Object(v.jsx)(et.a,{"aria-label":"delete",onClick:function(){return H(!1)},children:Object(v.jsx)(st.a,{fontSize:"small"})})]}):Object(v.jsx)(J,{entryDialogue:!0,sendResult:M,type:"city"})};return Object(v.jsxs)(Ne.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Le.a,{children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Sign up"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},autocomplete:"off",children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Username",name:"username",size:"small",variant:"outlined",onChange:function(e){return x(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Password",name:"password",size:"small",type:"password",variant:"outlined",onChange:function(e){return w(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Email",name:"email",size:"small",variant:"outlined",onChange:function(e){return k(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(G,{})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(A.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(C)?W?void fetch("/api/signup",{method:"POST",body:JSON.stringify({username:m,password:y,email:C,city_id:D}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){e.error?(l(e.error),a(!0)):(localStorage.setItem("jwt",e.jwt),j.loginUser(),console.log(localStorage.getItem("lastLoc")),d.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))})):(l("Please select a city from the given dropdown"),void a(!0)):(l("Your email is not valid!"),void a(!0))},children:"Sign up"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Le.a,{children:["Already have an account?"," ",Object(v.jsx)(u.b,{to:"/login",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Login"})})]})})]})}),Object(v.jsx)(Ie.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(nt,{severity:"error",children:r})})]})})),it=s(252),ot=s(253),rt=s(254),lt=s(255),jt=s(256);var dt=function(e){var t=Object(b.f)(),s=Object(n.useState)({border:"",text:"Add Friend",buttonVariant:"success",logo:Object(v.jsx)(it.a,{style:{verticalAlign:"text-bottom"}})}),c=Object(L.a)(s,2),a=c[0],i=c[1],o=Object(n.useState)(e.friendStat),r=Object(L.a)(o,2),l=r[0],j=r[1];Object(n.useEffect)((function(){switch(l){case 0:i({border:"",text:"Add Friend",buttonVariant:"success",logo:Object(v.jsx)(it.a,{style:{verticalAlign:"text-bottom"}})});break;case 1:i({border:"warning",text:"Cancel Req",buttonVariant:"danger",logo:Object(v.jsx)(ot.a,{style:{verticalAlign:"text-bottom"}})});break;case 2:i({border:"success",text:"Unfriend",buttonVariant:"danger",logo:Object(v.jsx)(rt.a,{style:{verticalAlign:"text-bottom"}})});break;case 3:i({border:"warning",text:"Accept",buttonVariant:"success",logo:Object(v.jsx)(lt.a,{style:{verticalAlign:"text-bottom"}})})}}),[l]);var d=function(e){fetch("/api/users/unfriend/".concat(e),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),console.log("removed friend ".concat(e)),j(0)};return Object(v.jsxs)($.a,{children:[Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{border:a.border,style:{width:"12rem",borderWidth:"1.5px",border:"solid",boxShadow:"0 2.8px 2.2px rgba(0, 0, 0, 0.034),0 6.7px 5.3px rgba(0, 0, 0, 0.048),0 12.5px 10px rgba(0, 0, 0, 0.06), 0 22.3px 17.9px rgba(0, 0, 0, 0.072),0 41.8px 33.4px rgba(0, 0, 0, 0.086),0 100px 80px rgba(0, 0, 0, 0.12)",borderColor:"#DEE2E6",maxHeight:"20rem",borderRadius:"15px"},children:Object(v.jsxs)(m.a.Body,{children:[Object(v.jsx)(ce.a,{style:{minHeight:"146px",minWidth:"146px"},src:e.pic,roundedCircle:!0,fluid:!0,thumbnail:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(m.a.Title,{onClick:function(){return t.push("/users/".concat(e.personKey,"/lists"))},children:e.name}),Object(v.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:e.city}),3!=l?Object(v.jsxs)(R.a,{size:"sm",onClick:function(){return 0===l?(t=e.personKey,fetch("/api/users/request/".concat(t),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),void j(1)):d(e.personKey);var t},variant:a.buttonVariant,children:[a.logo," ",a.text]}):Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsxs)(R.a,{size:"sm",onClick:function(){return t=e.personKey,console.log("trying to accept req from ".concat(t)),fetch("/api/users/accept/".concat(t),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}),void j(2);var t},variant:"success",children:[Object(v.jsx)(jt.a,{style:{verticalAlign:"text-bottom"}})," ","Accept"]}),Object(v.jsx)(R.a,{onClick:function(){d(e.personKey)},size:"sm",variant:"secondary",children:Object(v.jsx)(rt.a,{})})]})]})})]})};s(197);var ht=function(){var e=Object(n.useState)(""),t=Object(L.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(""),i=Object(L.a)(a,2),o=(i[0],i[1],Object(n.useContext)(O)),r=o.user.profile_url,l=o.user.username,j=function(e){console.log("injecting to DB ".concat(e)),fetch("/api/users/".concat(o.user.user_id,"/update/profile"),{method:"PUT",body:JSON.stringify({profile_url:e}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"content-wrapper",children:Object(v.jsx)("div",{className:"real-content-wrapper",style:{width:"100%"},children:Object(v.jsxs)("div",{className:"profile-card-wrapper",children:[Object(v.jsxs)("div",{className:"avatar-row",children:[Object(v.jsx)("div",{className:"nondecor",children:Object(v.jsx)("div",{className:"avatar-wrapper",children:Object(v.jsx)(I.a,{alt:l,src:r,style:{height:"100px",width:"100px"},children:l.charAt(0).toUpperCase()})})}),Object(v.jsxs)("div",{className:"editbutton",children:[Object(v.jsx)("input",{accept:"image/*",id:"icon-button-file",type:"file",onChange:function(e){return c(e.target.files[0])}}),Object(v.jsx)(A.a,{variant:"contained",onClick:function(){console.log(s);var e=new FormData;e.append("upload_preset","pkftr8lo"),e.append("file",s),fetch("https://api.cloudinary.com/v1_1/dcowmd6uf/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){if(!e.error)return console.log("url below :"),console.log(e.url),j(e.url),e;console.log(e.error)}))},children:"UPLOAD"})]})]}),Object(v.jsxs)("div",{id:"username",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"Username"}),Object(v.jsx)("h5",{style:{width:"370px"},children:l})]}),Object(v.jsxs)("div",{className:"label-wrapper",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"Email"}),Object(v.jsx)("h5",{style:{width:"370px"},children:o.user.email})]}),Object(v.jsxs)("div",{className:"label-wrapper",children:[Object(v.jsx)("h5",{style:{width:"192px"},children:"City"}),Object(v.jsx)("h5",{style:{width:"370px"},children:o.user.city})]})]})})})})};s(198);var ut=function(){var e=Object(n.useContext)(O),t=Object(n.useState)(""),s=Object(L.a)(t,2),c=(s[0],s[1],Object(n.useState)("")),a=Object(L.a)(c,2),i=(a[0],a[1],Object(n.useState)([])),o=Object(L.a)(i,2),r=o[0],l=o[1],j=Object(n.useState)([]),d=Object(L.a)(j,2),h=d[0],u=d[1],b=Object(n.useState)([]),p=Object(L.a)(b,2),m=p[0],x=p[1],g=Object(n.useState)([]),f=Object(L.a)(g,2),y=f[0],w=f[1],S=Object(n.useState)([]),_=Object(L.a)(S,2),C=_[0],k=_[1],T=Object(n.useState)([]),D=Object(L.a)(T,2),A=D[0],I=D[1];Object(n.useEffect)((function(){console.log(e),void 0!=e.user.user_id&&Q()}),[e]);var F=Object(n.useState)(!1),B=Object(L.a)(F,2),U=B[0],E=B[1],z=Object(n.useState)({}),R=Object(L.a)(z,2),P=R[0],W=R[1],H=Object(n.useState)(0),M=Object(L.a)(H,2),G=M[0],K=M[1],Y=function(e,t,s,n){console.log(e,t),W({user_id:e,username:t,profile_url:s,city_name:n}),console.log(y),console.log(A),console.log(C),console.log(P),y.includes(parseInt(e))?(console.log("setting 2"),K(2)):A.includes(parseInt(e))?(console.log("setting 1"),K(1)):C.includes(parseInt(e))&&(console.log("setting 3"),K(3)),E(!0),console.log(G)},$=function(){return U?Object(v.jsxs)("div",{children:[Object(v.jsx)(dt,{pic:P.profile_url,personKey:P.user_id,name:P.username,city:P.city_name,friendStat:G}),Object(v.jsx)(et.a,{"aria-label":"delete",onClick:function(){E(!1),K(0)},children:Object(v.jsx)(st.a,{fontSize:"small"})})]}):Object(v.jsx)(J,{entryDialogue:!0,sendResult:Y,type:"user"})},Q=function(){fetch("/api/users/".concat(e.user.user_id,"/friends"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){console.log("am I authorised?"),console.log(e),console.log(e.Friends),l(e.Friends),w(e.Friends.map((function(e){return e.user_id}))),u(e.Incoming),k(e.Incoming.map((function(e){return e.user_id}))),x(e.Outgoing),I(e.Outgoing.map((function(e){return e.user_id})))}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{}),Object(v.jsxs)("div",{className:"page-wrapper",children:[Object(v.jsx)("div",{children:Object(v.jsx)(N,{})}),Object(v.jsx)("div",{className:"sureal-content-wrapper",children:Object(v.jsxs)(V.a,{style:{display:"flex",justifyContent:"flex-start",width:"95%"},children:[Object(v.jsxs)(V.a,{style:{width:"100%",marginLeft:"40px",marginTop:"20px",height:"fit-content"},children:[Object(v.jsx)(Z.a,{xs:6,style:{padding:"0",margin:"0",height:"fit-content"},children:Object(v.jsx)(ht,{})}),Object(v.jsxs)(Z.a,{xs:3,children:[" ",Object(v.jsxs)("div",{className:"friend-serach-group",children:[Object(v.jsx)("h6",{children:"Search for users"}),Object(v.jsx)($,{})]})]})]}),Object(v.jsxs)(V.a,{style:{marginTop:"20px",marginLeft:"20px",display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:[r.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Your Friends"}),Object(v.jsx)("div",{className:"horizontaliser",children:r.map((function(e){return Object(v.jsx)(Z.a,{style:{maxWidth:"20rem"},children:Object(v.jsx)(dt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:2})},e.user_id)}))})]}):Object(v.jsx)("div",{}),m.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Sent Requests"}),Object(v.jsx)("div",{className:"horizontaliser",children:m.map((function(e){return Object(v.jsx)(Z.a,{xs:3,children:Object(v.jsx)(dt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:1})},e.user_id)}))})]}):Object(v.jsx)("div",{}),h.length>0?Object(v.jsxs)("div",{className:"friend-group",children:[Object(v.jsx)("h6",{children:"Pending Requests"}),Object(v.jsx)("div",{className:"horizonatliser",children:h.map((function(e){return Object(v.jsx)(Z.a,{style:{maxWidth:"20rem"},children:Object(v.jsx)(dt,{pic:e.profile_url,personKey:e.user_id,name:e.username,city:e.city_name,friendStat:3})},e.user_id)}))})]}):Object(v.jsx)("div",{})]})]})})]})]})};function bt(e){return Object(v.jsx)(Fe.a,Object(h.a)({elevation:6,variant:"filled"},e))}var pt=Object(Be.a)((function(e){return{container:{padding:e.spacing(3)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:65,alignItems:"flex-start",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"}}})),Ot=Object(b.i)((function(){var e=pt(),t=Object(n.useState)(!1),s=Object(L.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(""),o=Object(L.a)(i,2),r=o[0],l=o[1],j=Object(n.useContext)(O),d=Object(b.f)(),h=Object(b.g)(),p=Object(n.useState)({}),m=Object(L.a)(p,2),x=m[0],g=m[1],f=Object(n.useState)({}),y=Object(L.a)(f,2),w=y[0],S=y[1],_=Object(n.useState)(0),C=Object(L.a)(_,2),k=C[0],T=C[1],N=Object(n.useState)(""),D=Object(L.a)(N,2),I=D[0],F=D[1],B=Object(n.useState)(!1),U=Object(L.a)(B,2),E=U[0],z=U[1];Object(n.useEffect)((function(){console.log(j.user),console.log(h),h.state.movie_id&&(g({movie_id:h.state.movie_id,movie_name:h.state.movie_name}),z(!0))}),[]);var R=function(e,t){console.log(e,t),g({movie_id:e,movie_name:t}),z(!0)},W=function(){return E?Object(v.jsxs)("div",{children:[x.movie_id,":",Object(v.jsx)(A.a,{variant:"contained",style:{marginLeft:"10px"},children:x.movie_name}),Object(v.jsx)(et.a,{"aria-label":"delete",onClick:function(){return z(!1)},children:Object(v.jsx)(st.a,{fontSize:"small"})})]}):Object(v.jsx)(J,{entryDialogue:!0,sendResult:R,type:"movie"})};return Object(v.jsxs)(Ne.a,{className:e.container,maxWidth:"xs",container:!0,align:"center",children:[Object(v.jsx)(Le.a,{children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Admin Console"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(v.jsxs)(Ae.a,{container:!0,spacing:3,style:{paddingTop:40},children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(W,{})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Theatre ID",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return S(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,label:"Ticket Price",name:"theatre",size:"small",variant:"outlined",onChange:function(e){return T(e.target.value)}})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{fullWidth:!0,variant:"outlined",id:"datetime-local",label:"Scheduled date and time",type:"datetime-local",className:e.textField,InputLabelProps:{shrink:!0},onChange:function(e){return F(e.target.value)}})})]})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,children:Object(v.jsx)(A.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",onClick:function(){if(console.log(x,w,k,I),!E)return l("Please select a movie from the given dropdown"),void a(!0);if(""==I)return l("Please pick a date and time"),void a(!0);if(""==w)return l("Please pick a theatre"),void a(!0);if(""==k)return l("Please set a ticket price"),void a(!0);var e=I.split("T"),t=e[0]+" "+e[1]+":00";console.log(t),fetch("/api/shows/",{method:"POST",body:JSON.stringify({movie_id:x.movie_id,theatre_id:w,date_time:t,ticket_price:k}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("jwt",e.jwt),j.loginUser(),console.log(localStorage.getItem("lastLoc")),d.push(localStorage.getItem("lastLoc")?localStorage.getItem("lastLoc"):"/"))}))},children:"Add Show"})}),Object(v.jsx)(Ae.a,{item:!0,xs:12,align:"center",children:Object(v.jsxs)(Le.a,{children:["Not here to add a show?"," ",Object(v.jsx)(u.b,{to:"/",style:{textDecoration:"none",color:"#3f50b5"},children:Object(v.jsx)(De.a,{fontWeight:"fontWeightBold",children:"Take me home"})})]})})]})}),Object(v.jsx)(Ie.a,{open:c,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&a(!1)},children:Object(v.jsx)(bt,{severity:"error",children:r})})]})})),mt=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={person:"",results:[],typingTimout:0,dropdownClasses:"dropdown-menu"},e.clickedOutside=function(t){t&&e.setState({dropdownClasses:"dropdown-menu"})},e.changeName=function(t){e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.setState({person:t.target.value}),t.target.value&&(e.state.typingTimeout=setTimeout(e.timedSearch,700))},e.timedSearch=function(){e.searchForPeople().then((function(e){return e.json()})).then((function(t){var s=[];return t.map((function(e,t){return s[t]={id:e.person_id,name:e.person_name}})),console.log(s),e.setState({results:s}),t})).then((function(t){t.length?e.setState({dropdownClasses:"show dropdown-menu"}):e.setState({dropdownClasses:"dropdown-menu"})}))},e.searchForPeople=function(){return fetch("/api/search/people",{method:"POST",body:JSON.stringify({person:e.state.person}),headers:{"Content-type":"application/json; charset=UTF-8"}})},e.clickHandler=function(t,s){e.clickedOutside(!0),e.props.sendResult(t,s)},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.props.entryDialogue?Object(v.jsxs)(E.a,{inline:!0,onSubmit:function(e){return e.preventDefault()},className:"nav-item dropdown",children:[Object(v.jsx)(z.a,{type:"text",placeholder:this.props.type?this.props.type:"People",className:"mr-sm-3",onChange:this.changeName}),Object(v.jsx)(M,{type:this.props.type,onClick:this.clickHandler,entryDialogue:!0,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]}):Object(v.jsxs)(E.a,{inline:!0,onSubmit:this.submitHandler,className:"nav-item dropdown",children:[Object(v.jsx)(z.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:this.changeName}),Object(v.jsx)(M,{onClick:this.clickHandler,entryDialogue:!0,dropdownClasses:this.state.dropdownClasses,results:this.state.results,clickedOutside:this.clickedOutside})]})})}}]),s}(n.Component),xt=Object(b.i)(mt),gt=s(266),ft=s(237),vt=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={chipData:[],movies:[],searchTerm:""},n.handleDelete=function(e){return function(){n.setState({chipData:n.state.chipData.filter((function(t){return t.key!==e.key}))})}},n.addChip=function(e,t){var s=n.state.chipData;s.push({key:e,label:t,person_id:e,person_title:t}),n.setState({chipData:s}),console.log(n.state.chipData)},n.setSearchTerm=function(e){n.setState({searchTerm:e.target.value}),console.log(n.state)},n.findMovies=function(){var e=[];n.state.chipData.map((function(t){return e.push(t.person_id)})),fetch("/api/search/movies",{method:"POST",body:JSON.stringify({title:n.state.searchTerm,people:e,genres:[]}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){n.setState({movies:e}),console.log(n.state.movies)}))},console.log(Object(p.a)(n)),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)($.a,{fluid:!0,children:[Object(v.jsx)(q,{}),Object(v.jsx)("br",{}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Z.a,{xs:2,id:"sidebar-wrapper",children:Object(v.jsx)(N,{})}),Object(v.jsx)(Z.a,{xs:10,id:"page-content-wrapper",children:Object(v.jsxs)($.a,{children:[Object(v.jsx)(Le.a,{variant:"h5",style:{marginBottom:"30px"},children:"Advanced Search"}),Object(v.jsx)(P.a,{style:{display:"block",marginBottom:"30px"},id:"standard-basic",label:"Title",onInput:this.setSearchTerm}),Object(v.jsx)(xt,{entryDialogue:!0,sendResult:this.addChip}),Object(v.jsx)(ft.a,{component:"ul",children:this.state.chipData.map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)(gt.a,{label:t.label,onDelete:e.handleDelete(t)})},t.key)}))},this.state.chipData?this.state.chipData.length:"empty69"),Object(v.jsx)(R.a,{onClick:this.findMovies,style:{marginTop:"20px"},children:"Search with filters"}),Object(v.jsx)(C,{movies:this.state.movies})]})})]})]})})}}]),s}(n.Component);vt.contextType=O;var yt=Object(b.i)(vt),wt=function(){return Object(v.jsx)(u.a,{children:Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(X,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/movies/:id",render:function(e){return Object(v.jsx)(Te,Object(h.a)({},e),e.match.params.id)}}),Object(v.jsx)(b.a,{exact:!0,path:"/users/:id/lists",render:function(e){return Object(v.jsx)(Xe,Object(h.a)({},e),e.match.params.id)}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows/:id/seats",render:function(){return Object(v.jsx)(Je,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows/:id/book",render:function(){return Object(v.jsx)(Ye,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/advancedSearch",render:function(){return Object(v.jsx)(yt,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/movies/:id/shows",render:function(){return Object(v.jsx)(We,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/shows",render:function(){return Object(v.jsx)(Ot,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/login",render:function(){return Object(v.jsx)(Re,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/signup",render:function(){return Object(v.jsx)(at,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/friends",render:function(){return Object(v.jsx)(ut,{})}}),Object(v.jsx)(b.a,{exact:!0,path:"/profile",render:function(){return Object(v.jsx)(ht,{})}})]})})})};var St=function(e){Object(j.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).logout=function(){localStorage.clear(),n.setState({user:{}})},n.login=function(){fetch("/api/is-logged-in",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){var t;e.logged_in?(n.setState({user:(t={profile_url:e.details.profile_url,user_role:e.details.user_role,user_id:e.details.user_id,username:e.details.username,city_id:e.details.city_id,city:e.details.city_name},Object(o.a)(t,"profile_url",e.details.profile_url),Object(o.a)(t,"email",e.details.email),t)}),console.log(n.state.user)):n.setState({user:{}});console.log(e)}))},n.state={user:{}},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.login()}},{key:"render",value:function(){var e={user:this.state.user,logoutUser:this.logout,loginUser:this.login};return Object(v.jsx)(O.Provider,{value:e,children:Object(v.jsx)(wt,{})})}}]),s}(n.Component),_t=(s(199),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,272)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),a(e),i(e)}))});i.a.render(Object(v.jsx)(St,{}),document.getElementById("root")),_t()},94:function(e,t,s){}},[[200,1,2]]]);
//# sourceMappingURL=main.556aafde.chunk.js.map